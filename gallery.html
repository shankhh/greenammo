<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./src/style.css">
    <script src="https://unpkg.com/lenis@1.3.11/dist/lenis.min.js">
        // Initialize Lenis
        const lenis = new Lenis({
            autoRaf: true,
        });

        // Listen for the scroll event and log the event data
        lenis.on('scroll', (e) => {
            console.log(e);
        });
    </script>
    <title>GreenAmmo</title>
</head>

<body class="bg-gray-50 text-gray-900 font-sans">
    <!-- ðŸŒ¿ NAV COMPONENT for GreenAmmo Group -->
    <nav class="w-full bg-white shadow-sm sticky top-0 z-50">
        <div class="container mx-auto flex justify-between items-center px-6 py-4">
            <!-- Logo -->
            <a href="/" class="font-bold text-2xl text-green-700 tracking-tight">
                GreenAmmo
            </a>

            <!-- Primary Nav Links -->
            <ul class="hidden md:flex space-x-6 text-gray-700 font-medium items-center">
                <li><a href="/aboutus" class="hover:text-green-600 transition">About Us</a></li>

                <!-- Solutions Dropdown -->
                <li class="relative group">
                    <button class="hover:text-green-600 transition inline-flex items-center gap-1">
                        Solutions
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                        </svg>
                    </button>
                    <div
                        class="absolute hidden group-hover:grid grid-cols-3 gap-4 bg-white rounded-2xl shadow-lg p-6 top-5 -left-12 w-[800px] transition-all">
                        <div>
                            <h4 class="font-semibold text-green-700 mb-2">Finance</h4>
                            <ul class="text-sm space-y-1">
                                <li><a href="#" class="hover:text-green-600">Taxation</a></li>
                                <li><a href="#" class="hover:text-green-600">Accounting & Compliance</a></li>
                                <li><a href="#" class="hover:text-green-600">Project Facilitation</a></li>
                                <li><a href="#" class="hover:text-green-600">Business Consulting</a></li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-semibold text-green-700 mb-2">Education & Development</h4>
                            <ul class="text-sm space-y-1">
                                <li><a href="#" class="hover:text-green-600">Education & Training</a></li>
                                <li><a href="#" class="hover:text-green-600">Skill Development</a></li>
                                <li><a href="#" class="hover:text-green-600">Website & Content</a></li>
                            </ul>
                        </div>
                        <div class="flex flex-col">
                            <div>
                                <h4 class="font-semibold text-green-700 mb-2">Event and Supply</h4>
                                <ul class="text-sm space-y-1">
                                    <li><a href="#" class="hover:text-green-600">Event & Management</a></li>
                                    <li><a href="#" class="hover:text-green-600">Supply Services</a></li>

                            </div>
                            <br>
                            <div>
                                <h4 class="font-semibold text-green-700 mb-2" title="Powered by GreenCabin">
                                    Accommodation</h4>
                            </div>
                        </div>
                    </div>
                </li>

                <!-- Trust Dropdown -->
                <li class="relative group">
                    <button class="hover:text-green-600 transition inline-flex items-center gap-1">
                        Trust
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                        </svg>
                    </button>
                    <div
                        class="absolute hidden group-hover:grid grid-cols-2 gap-4 bg-white rounded-2xl shadow-lg p-6 top-5 -left-12 w-[600px] transition-all">
                        <div>
                            <h4 class="font-semibold text-green-700 mb-2">Programs</h4>
                            <ul class="text-sm space-y-1">
                                <li><a href="#" class="hover:text-green-600">Projects & Milestones</a></li>
                                <li><a href="#" class="hover:text-green-600">Campaigns</a></li>
                                <li><a href="#" class="hover:text-green-600">Reports & Research</a></li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-semibold text-green-700 mb-2">Get Involved</h4>
                            <ul class="text-sm space-y-1">
                                <li><a href="#" class="hover:text-green-600">Join the Change</a></li>
                                <li><a href="#" class="hover:text-green-600">Donate / Sponsor</a></li>
                                <li><a href="#" class="hover:text-green-600">Volunteer</a></li>
                            </ul>
                        </div>
                    </div>
                </li>

                <li class="relative group">
                    <button class="hover:text-green-600 transition inline-flex items-center gap-1">
                        Media
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                        </svg>
                    </button>
                    <div
                        class="absolute hidden group-hover:grid grid-cols-2 gap-4 bg-white rounded-2xl shadow-lg p-6 top-5 -left-12 w-[500px] transition-all">
                        <div>
                            <h4 class="font-semibold text-green-700 mb-2">Our Story</h4>
                            <ul class="text-sm space-y-1">
                                <li><a href="/gallery.html" class="hover:text-green-600">Gallery</a></li>
                                <li><a href="/testimonials.html" class="hover:text-green-600">Testimonials</a></li>
                                <li><a href="/digitalcontent.html" class="hover:text-green-600">Digital Content</a></li>
                            </ul>
                        </div>

                </li>
                <li><a href="#" class="hover:text-green-600 transition">Blog</a></li>
                <li><a href="./joinus" class="hover:text-green-600 transition">Join Us</a></li>
            </ul>

            <!-- Explore Button -->
            <button class="bg-green-600 text-white px-4 py-2 rounded-xl shadow hover:bg-green-700 transition md:ml-4"
                onclick="openModal()">
                Explore
            </button>

            <!-- Mobile Menu Toggle -->
            <button class="md:hidden flex items-center text-green-700" id="menu-toggle">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            </button>
        </div>

        <!-- Mobile Dropdown -->
        <div class="md:hidden hidden flex-col space-y-2 bg-white shadow-inner px-6 py-4" id="mobile-menu">
            <a href="#" class="block hover:text-green-600">Home</a>
            <a href="#" class="block hover:text-green-600">Solutions</a>
            <a href="#" class="block hover:text-green-600">Trust</a>
            <a href="#" class="block hover:text-green-600">Media</a>
            <a href="#" class="block hover:text-green-600">Blog</a>
            <a href="#" class="block hover:text-green-600">Join Us</a>
        </div>
    </nav>

    <!-- ðŸ”§ Simple JS for Mobile Toggle -->
    <script>
        document.getElementById('menu-toggle').addEventListener('click', () => {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        });
    </script>
    <main class="min-h-screen bg-green-50">

        <section class="bg-green-700 text-white py-16">
            <div class="container mx-auto px-4 md:px-8 text-center">
                <h1 class="text-4xl md:text-5xl font-bold mb-4">Our Work in Action</h1>
                <p class="text-lg md:text-xl max-w-2xl mx-auto">
                    A visual journey through our community projects, workshops, and sustainable efforts across the
                    country.
                </p>
            </div>
        </section>

        <!-- <section class="py-16">
            <div class="container mx-auto px-4 md:px-8">
                <h2 class="text-3xl font-bold text-green-900 mb-8 text-center">Photo Gallery</h2>

                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-3 gap-3 max-w-6xl mx-auto">

                    <div class="aspect-square overflow-hidden cursor-pointer shadow-md hover:shadow-xl transition duration-330 relative group"
                        onclick="openCarousel(1)">
                        <img src="https://source.unsplash.com/random/400x400/?recycling" alt="Recycling drive activity"
                            class="w-full h-full object-cover group-hover:scale-105 transition duration-300">
                        <div
                            class="absolute inset-0 bg-green-900 bg-opacity-30 flex items-center justify-center opacity-0 group-hover:opacity-100 transition duration-300">
                            <span class="text-white font-semibold text-sm p-2 bg-green-600/70 rounded">View Project</span>
                        </div>
                    </div>

                    <div class="aspect-square overflow-hidden cursor-pointer shadow-md hover:shadow-xl transition duration-330"
                        onclick="openCarousel(2)"</div>
                    <div class="aspect-square overflow-hidden cursor-pointer shadow-md hover:shadow-xl transition duration-330"
                        onclick="openCarousel(3)"> <img src="https://source.unsplash.com/random/400x400/?composting"
                            alt="Composting workshop"
                            class="w-full h-full object-cover hover:scale-105 transition duration-300"></div>
                    <div class="aspect-square overflow-hidden cursor-pointer shadow-md hover:shadow-xl transition duration-330"
                        onclick="openCarousel(4)"> <img
                            src="https://source.unsplash.com/random/400x400/?volunteers,nature"
                            alt="Volunteers in nature"
                            class="w-full h-full object-cover hover:scale-105 transition duration-300"></div>
                    <div class="aspect-square overflow-hidden cursor-pointer shadow-md hover:shadow-xl transition duration-330"
                        onclick="openCarousel(5)"> <img src="https://source.unsplash.com/random/400x400/?beach-cleanup"
                            alt="Beach cleanup drive"
                            class="w-full h-full object-cover hover:scale-105 transition duration-300"></div>
                    <div class="aspect-square overflow-hidden cursor-pointer shadow-md hover:shadow-xl transition duration-330"
                        onclick="openCarousel(6)"> <img src="https://source.unsplash.com/random/400x400/?workshop"
                            alt="Sustainability workshop"
                            class="w-full h-full object-cover hover:scale-105 transition duration-300"></div>
                    <div class="aspect-square overflow-hidden cursor-pointer shadow-md hover:shadow-xl transition duration-330"
                        onclick="openCarousel(7)"> <img src="https://source.unsplash.com/random/400x400/?india,school"
                            alt="Awareness at school in India"
                            class="w-full h-full object-cover hover:scale-105 transition duration-300"></div>
                    <div class="aspect-square overflow-hidden cursor-pointer shadow-md hover:shadow-xl transition duration-330"
                        onclick="openCarousel(8)"> <img src="https://source.unsplash.com/random/400x400/?ecobricks"
                            alt="Ecobricks building"
                            class="w-full h-full object-cover hover:scale-105 transition duration-300"></div>
                    <div class="aspect-square overflow-hidden cursor-pointer shadow-md hover:shadow-xl transition duration-330"
                        onclick="openCarousel(9)"> <img src="https://source.unsplash.com/random/400x400/?planting"
                            alt="Community planting activity"
                            class="w-full h-full object-cover hover:scale-105 transition duration-300"></div>
                </div>
            </div>
        </section>

        <div id="carousel-modal"
            class="fixed inset-0 bg-black bg-opacity-90 z-50 hidden flex items-center justify-center p-4">
            <div class="relative w-full max-w-4xl h-full max-h-[80vh]">
                <button onclick="closeCarousel()"
                    class="absolute top-0 right-0 m-4 text-white text-4xl z-50">&times;</button>

                <div class="w-full h-full bg-gray-800 rounded-lg flex items-center justify-center text-white">
                    <p>Carousel Placeholder: Image and caption will appear here.</p>
                </div>

            </div>
        </div>
        <script>
                    async function fetchGallery(params) {
            try {
                const res = await fetch('https://greenammo.in/wp-json/wp/v2/media')
                const data =  await res.json()

                console.log(data)
            } catch (error) {
                console.log(error)
            }
        } 
        fetchGallery() ;
        </script> -->


        <section class="py-16">
            <div class="container mx-auto px-4 md:px-8">
                <h2 class="text-3xl font-bold text-green-900 mb-8 text-center">Photo Gallery</h2>

                <div id="gallery-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-3 gap-3 max-w-6xl mx-auto">
                </div>

                <div id="infinite-scroll-sentinel" class="text-center py-8">
                    <div id="loading-spinner" class="hidden">
                        <svg class="animate-spin mx-auto h-8 w-8 text-green-700" xmlns="http://www.w3.org/2000/svg"
                            fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4">
                            </circle>
                            <path class="opacity-75" fill="currentColor"
                                d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                            </path>
                        </svg>
                        <p class="text-gray-500 mt-2">Loading more images...</p>
                    </div>
                    <p id="end-message" class="hidden text-gray-500">You've reached the end of the gallery.</p>
                </div>
            </div>
        </section>

        <div id="carousel-modal"
            class="fixed inset-0 bg-black bg-opacity-90 z-50 hidden items-center justify-center p-4 transition-opacity duration-300">
            <div class="relative w-full max-w-4xl h-full max-h-[80vh]">
                <button onclick="closeCarousel()"
                    class="absolute top-0 right-0 m-4 text-white text-4xl z-[60] hover:text-green-400 transition">&times;</button>

                <button onclick="changeImage(-1)"
                    class="absolute left-0 top-1/2 transform -translate-y-1/2 p-3 text-white text-4xl z-50 opacity-75 hover:opacity-100 transition">
                    &#10094;
                </button>

                <button onclick="changeImage(1)"
                    class="absolute right-0 top-1/2 transform -translate-y-1/2 p-3 text-white text-4xl z-50 opacity-75 hover:opacity-100 transition">
                    &#10095;
                </button>

                <div id="carousel-content" class="w-full h-full bg-gray-800 rounded-lg flex flex-col overflow-hidden">
                    <img id="carousel-image" src="" alt="" class="flex-grow w-full object-contain p-4">
                    <div id="carousel-caption" class="p-4 bg-gray-900 text-white text-center text-lg font-medium"></div>
                </div>

            </div>
        </div>

        <script>
            let currentPage = 1;
            const perPage = 9;
            let isLoading = false;
            let hasMore = true;
            let allImagesData = []; // Stores all loaded data for the carousel
            let currentIndex = 0; // Current image index in the carousel

            const grid = document.getElementById('gallery-grid');
            const sentinel = document.getElementById('infinite-scroll-sentinel');
            const spinner = document.getElementById('loading-spinner');
            const endMessage = document.getElementById('end-message');
            const modal = document.getElementById('carousel-modal');
            const carouselImage = document.getElementById('carousel-image');
            const carouselCaption = document.getElementById('carousel-caption');

            // --- 1. DATA FETCHING ---
            async function fetchGallery() {
                if (isLoading || !hasMore) return;

                isLoading = true;
                spinner.classList.remove('hidden');

                try {
                    // Using WP API pagination: page=${currentPage}&per_page=${perPage}
                    const res = await fetch(`https://greenammo.in/wp-json/wp/v2/media?per_page=${perPage}&page=${currentPage}`);

                    // Check the 'X-WP-TotalPages' header to manage infinite scroll state
                    const totalPages = res.headers.get('X-WP-TotalPages');
                    const data = await res.json();

                    if (data.length === 0 || (totalPages && currentPage >= parseInt(totalPages))) {
                        hasMore = false;
                        endMessage.classList.remove('hidden');
                        sentinel.classList.add('hidden'); // Hide sentinel if we're done
                    } else {
                        renderImages(data);
                        currentPage++;
                    }
                } catch (error) {
                    console.error("Error fetching gallery data:", error);
                    // Optionally, show an error message
                } finally {
                    isLoading = false;
                    spinner.classList.add('hidden');
                }
            }

            // --- 2. IMAGE RENDERING & LAZY LOADING ---
            // function renderImages(data) {
            //     // Collect new images for the carousel array
            //     allImagesData = allImagesData.concat(data);

            //     data.forEach((item, index) => {
            //         // Only proceed if a proper image link exists
            //         const imageUrl = item.media_details?.sizes?.medium_large?.source_url || item.source_url;
            //         if (!imageUrl) return;

            //         const globalIndex = allImagesData.length - data.length + index; // Calculate correct index in allImagesData
            //         const caption = item.caption.rendered.replace(/<[^>]*>?/gm, '') || 'View Project';

            //         const imageContainer = document.createElement('div');
            //         imageContainer.className = 'aspect-square overflow-hidden cursor-pointer shadow-md hover:shadow-xl transition duration-330 relative group';
            //         // Use the global index to map back to the allImagesData array
            //         imageContainer.setAttribute('onclick', `openCarousel(${globalIndex})`); 

            //         const img = document.createElement('img');
            //         img.setAttribute('data-src', imageUrl); // Use data-src for lazy loading
            //         img.alt = caption;
            //         img.className = 'w-full h-full object-cover group-hover:scale-105 transition duration-300';
            //         img.loading = 'lazy'; // Browser-native lazy loading

            //         // IntersectionObserver for custom lazy loading (optional, but good practice for full control)
            //         observer.observe(img);

            //         // Overlay with caption
            //         const overlay = document.createElement('div');
            //         overlay.className = 'absolute inset-0 bg-green-900 bg-opacity-30 flex items-center justify-center opacity-0 group-hover:opacity-100 transition duration-300';
            //         overlay.innerHTML = `<span class="text-white font-semibold text-sm p-2 bg-green-600/70 rounded">${caption}</span>`;

            //         imageContainer.appendChild(img);
            //         imageContainer.appendChild(overlay);
            //         grid.appendChild(imageContainer);
            //     });
            // }
            function renderImages(data) {
                // Collect new images/videos for the carousel array
                allImagesData = allImagesData.concat(data);

                data.forEach((item, index) => {
                    const mimeType = item.mime_type || item.media_type || '';
                    const isImage = mimeType.startsWith('image');
                    const isVideo = mimeType.startsWith('video');

                    // Only process valid image or video
                    if (!isImage && !isVideo) return;

                    // Prefer medium_large size if available
                    const mediaUrl = item.media_details?.sizes?.medium_large?.source_url || item.source_url;
                    if (!mediaUrl) return;

                    const globalIndex = allImagesData.length - data.length + index; // Correct index for carousel
                    const caption = item.caption?.rendered?.replace(/<[^>]*>?/gm, '') || 'View Project';

                    // Main container for each media item
                    const container = document.createElement('div');
                    container.className =
                        'aspect-square overflow-hidden cursor-pointer shadow-md hover:shadow-xl transition duration-330 relative group';
                    container.setAttribute('onclick', `openCarousel(${globalIndex})`);

                    // Create media element
                    let mediaElement;
                    if (isImage) {
                        mediaElement = document.createElement('img');
                        mediaElement.setAttribute('data-src', mediaUrl);
                        mediaElement.alt = caption;
                        mediaElement.className =
                            'w-full h-full object-cover group-hover:scale-105 transition duration-300';
                        mediaElement.loading = 'lazy';
                        observer.observe(mediaElement); // Lazy load via IntersectionObserver
                    } else if (isVideo) {
                        mediaElement = document.createElement('video');
                        mediaElement.src = mediaUrl;
                        mediaElement.className = 'w-full h-full object-cover';
                        mediaElement.muted = true;
                        mediaElement.loop = true;
                        mediaElement.playsInline = true;
                        mediaElement.preload = 'metadata';

                        // Start playing on hover (optional)
                        container.addEventListener('mouseenter', () => mediaElement.play());
                        container.addEventListener('mouseleave', () => mediaElement.pause());
                    }

                    // Overlay with caption
                    // const overlay = document.createElement('div');
                    // overlay.className =
                    //     'absolute inset-0 bg-green-900 bg-opacity-30 flex items-center justify-center opacity-0 group-hover:opacity-100 transition duration-300';
                    // overlay.innerHTML = `<span class="text-white font-semibold text-sm p-2 bg-green-600/70 rounded">${caption}</span>`;

                    container.appendChild(mediaElement);
                    // container.appendChild(overlay);
                    grid.appendChild(container);
                });
            }



            // --- LAZY LOADING IMPLEMENTATION (Intersection Observer) ---
            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        img.src = img.getAttribute('data-src');
                        img.removeAttribute('data-src');
                        observer.unobserve(img); // Stop observing once loaded
                    }
                });
            }, {
                rootMargin: '0px 0px 200px 0px', // Load images when 200px from viewport
            });

            // --- 3. INFINITE SCROLL ---
            const infiniteScrollObserver = new IntersectionObserver((entries) => {
                if (entries[0].isIntersecting && !isLoading && hasMore) {
                    fetchGallery();
                }
            }, {
                threshold: 0.1
            });

            infiniteScrollObserver.observe(sentinel);


            // --- 4. CAROUSEL LOGIC ---
            // function updateCarousel() {
            //     if (allImagesData.length === 0) return;

            //     const item = allImagesData[currentIndex];

            //     // Find the most appropriate image size (fallback logic)
            //     const imageUrl = item.media_details?.sizes?.large?.source_url || item.media_details?.sizes?.full?.source_url || item.source_url;
            //     const caption = item.caption.rendered.replace(/<[^>]*>?/gm, '') || `Image ${currentIndex + 1} of ${allImagesData.length}`;

            //     carouselImage.src = imageUrl;
            //     carouselImage.alt = caption;
            //     carouselCaption.textContent = caption;

            //     // Ensure buttons visibility is updated
            //     document.querySelector('.relative button:nth-of-type(1)').style.visibility = currentIndex === 0 ? 'hidden' : 'visible';
            //     document.querySelector('.relative button:nth-of-type(2)').style.visibility = currentIndex === allImagesData.length - 1 ? 'hidden' : 'visible';
            // }
            // function updateCarousel() {
            //     if (allImagesData.length === 0) return;

            //     const item = allImagesData[currentIndex];
            //     const mimeType = item.mime_type || item.media_type || '';
            //     const isImage = mimeType.startsWith('image');
            //     const isVideo = mimeType.startsWith('video');
            //     // Find the most appropriate image size (fallback logic)
            //     const imageUrl =
            //         item.media_details?.sizes?.large?.source_url ||
            //         item.media_details?.sizes?.full?.source_url ||
            //         item.source_url;

            //     const caption =
            //         item.caption?.rendered?.replace(/<[^>]*>?/gm, '') ||
            //         `Image ${currentIndex + 1} of ${allImagesData.length}`;

            //     // Apply image source and style
            //     carouselImage.src = imageUrl;
            //     carouselImage.alt = caption;

            //     // âœ… Ensure proper scaling and alignment
            //     carouselImage.style.objectFit = 'contain';
            //     carouselImage.style.width = '100%';
            //     carouselImage.style.height = '100%';
            //     carouselImage.style.display = 'block';

            //     // Update caption
            //     carouselCaption.textContent = caption;

            //     // Update navigation button visibility
            //     document.querySelector('.relative button:nth-of-type(1)').style.visibility =
            //         currentIndex === 0 ? 'hidden' : 'visible';
            //     document.querySelector('.relative button:nth-of-type(2)').style.visibility =
            //         currentIndex === allImagesData.length - 1 ? 'hidden' : 'visible';
            // }
            function updateCarousel() {
                if (allImagesData.length === 0) return;

                const item = allImagesData[currentIndex];
                const mimeType = item.mime_type || item.media_type || '';
                const isImage = mimeType.startsWith('image');
                const isVideo = mimeType.startsWith('video');

                // âœ… Only proceed for image or video
                if (!isImage && !isVideo) return;

                // Pick the best media source
                const mediaUrl =
                    item.media_details?.sizes?.large?.source_url ||
                    item.media_details?.sizes?.full?.source_url ||
                    item.source_url;

                if (!mediaUrl) return;

                const caption =
                    item.caption?.rendered?.replace(/<[^>]*>?/gm, '') ||
                    `Item ${currentIndex + 1} of ${allImagesData.length}`;

                const carouselContent = document.getElementById('carousel-content');
                const carouselCaption = document.getElementById('carousel-caption');
                const existingMedia = document.getElementById('carousel-image');

                // âœ… Remove old media element if exists
                if (existingMedia) existingMedia.remove();

                // âœ… Create new <img> or <video> element
                let newMediaElement;

                if (isImage) {
                    newMediaElement = document.createElement('img');
                    newMediaElement.id = 'carousel-image';
                    newMediaElement.src = mediaUrl;
                    newMediaElement.alt = caption;
                    newMediaElement.className =
                        'flex-grow w-full object-cover p-4 transition duration-500 ease-in-out';
                    newMediaElement.loading = 'lazy';
                } else if (isVideo) {
                    newMediaElement = document.createElement('video');
                    newMediaElement.id = 'carousel-image';
                    newMediaElement.src = mediaUrl;
                    newMediaElement.className =
                        'flex-grow w-full object-cover p-4 transition duration-500 ease-in-out';
                    newMediaElement.controls = true;
                    newMediaElement.autoplay = true;
                    newMediaElement.muted = true;
                    newMediaElement.loop = true;
                    newMediaElement.playsInline = true;
                }
                Object.assign(newMediaElement.style, {
                    width: '100%',
                    height: '100%',
                    display: 'block',
                    padding: '16px',
                    objectFit: 'contain',
                    transition: 'opacity 0.3s ease-in-out',
                });
                // âœ… Inject before the caption (so caption stays below media)
                carouselContent.insertBefore(newMediaElement, carouselCaption);

                // âœ… Update caption
                carouselCaption.textContent = caption;

                // âœ… Update nav buttons visibility
                document.querySelector('.relative button:nth-of-type(1)').style.visibility =
                    currentIndex === 0 ? 'hidden' : 'visible';
                document.querySelector('.relative button:nth-of-type(2)').style.visibility =
                    currentIndex === allImagesData.length - 1 ? 'hidden' : 'visible';
            }


            window.openCarousel = (index) => {
                currentIndex = index;
                updateCarousel();
                modal.classList.remove('hidden');
                modal.classList.add('flex');
                document.body.style.overflow = 'hidden'; // Prevent scrolling background
            }

            window.closeCarousel = () => {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
                document.body.style.overflow = '';
            }

            window.changeImage = (step) => {
                const newIndex = currentIndex + step;
                if (newIndex >= 0 && newIndex < allImagesData.length) {
                    currentIndex = newIndex;
                    updateCarousel();
                }
            }

            // Start fetching when the script loads
            fetchGallery();
        </script>


        <footer class="bg-green-800 text-white pt-12">
            <div class="container mx-auto px-4 md:px-8">

                <div class="grid grid-cols-1 md:grid-cols-5 gap-8 pb-8 border-b border-green-700">

                    <div class="md:col-span-2 space-y-4">
                        <h3 class="text-3xl font-bold text-green-300">GreenAmmo</h3>
                        <p class="text-sm text-green-200 max-w-sm">
                            Empowering sustainable living and waste management through community action, research, and
                            project initiation.
                        </p>
                    </div>

                    <div class="md:col-span-3 grid grid-cols-2 sm:grid-cols-4 gap-6">

                        <div class="space-y-3">
                            <h4 class="font-semibold text-green-50 mb-3">GreenAmmo</h4>
                            <ul class="text-sm space-y-2 text-green-200">
                                <li><a href="/about-us.html" class="hover:text-green-300 transition">About Us</a></li>
                                <li><a href="/gallery.html" class="hover:text-green-300 transition">Media (Gallery)</a>
                                </li>
                                <li><a href="/certifications.html"
                                        class="hover:text-green-300 transition">Certificates</a></li>
                                <li><a href="/alliances.html" class="hover:text-green-300 transition">Alliances</a></li>
                            </ul>
                        </div>

                        <div class="space-y-3">
                            <h4 class="font-semibold text-green-50 mb-3">Solutions</h4>
                            <ul class="text-sm space-y-2 text-green-200">
                                <li><a href="/solutions/finance.html"
                                        class="hover:text-green-300 transition">Finance</a></li>
                                <li><a href="/solutions/education.html"
                                        class="hover:text-green-300 transition">Education & Development</a></li>
                                <li><a href="/solutions/event-supply.html" class="hover:text-green-300 transition">Event
                                        & Supply</a></li>
                                <li><a href="/solutions/accommodations.html"
                                        class="hover:text-green-300 transition">Accommodations</a></li>
                            </ul>
                        </div>

                        <div class="space-y-3">
                            <h4 class="font-semibold text-green-50 mb-3">Trust</h4>
                            <ul class="text-sm space-y-2 text-green-200">
                                <li><a href="/trust/projects.html" class="hover:text-green-300 transition">Projects &
                                        Milestones</a></li>
                                <li><a href="/trust/campaigns.html"
                                        class="hover:text-green-300 transition">Campaigns</a></li>
                                <li><a href="/trust/reports.html" class="hover:text-green-300 transition">Reports &
                                        Research</a></li>
                            </ul>
                        </div>

                        <div class="space-y-3">
                            <h4 class="font-semibold text-green-50 mb-3">Take Action</h4>
                            <div class="space-y-2">
                                <a href="/join-us.html"
                                    class="block bg-green-600 text-white text-center text-sm font-medium py-2 rounded-lg hover:bg-green-700 transition">
                                    Join Us
                                </a>
                                <a href="/explore.html"
                                    class="block border border-green-600 text-green-50 text-center text-sm font-medium py-2 rounded-lg hover:border-green-300 hover:text-green-300 transition">
                                    Explore
                                </a>
                            </div>
                        </div>

                    </div>

                </div>

                <div class="flex flex-col sm:flex-row justify-between items-center py-6 text-sm text-green-200">
                    <p>&copy; 2025 GreenAmmo Group. All rights reserved.</p>

                    <div class="flex gap-4 mt-4 sm:mt-0">
                        <a href="#" class="hover:text-green-400 transition" aria-label="Facebook">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="currentColor">
                                <path
                                    d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm3 8h-2v2h2v2h-2v4h-2v-4H9V12h2V10c0-1.104.896-2 2-2h2v2z" />
                            </svg>
                        </a>
                        <a href="#" class="hover:text-green-400 transition" aria-label="Instagram">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="currentColor">
                                <path
                                    d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm3.179 2.541c.883 0 1.632.748 1.632 1.632v.005c0 .883-.749 1.631-1.632 1.631h-.005c-.883 0-1.632-.748-1.632-1.631v-.005c0-.883.749-1.632 1.632-1.632h.005zM12 8c2.206 0 4 1.794 4 4s-1.794 4-4 4-4-1.794-4-4 1.794-4 4-4zm-2.821 8.879c.148.093.308.175.474.246.36.155.76.246 1.171.246h2.348c.41 0 .81-.091 1.17-.246.166-.071.326-.153.473-.246.22-.138.423-.306.605-.5.182-.194.34-.413.474-.658.134-.245.242-.516.326-.811.168-.598.256-1.233.256-1.879v-2.352c0-.646-.088-1.281-.256-1.879a4.897 4.897 0 0 0-.326-.811 4.795 4.795 0 0 0-.474-.658 4.67 4.67 0 0 0-.605-.5 4.908 4.908 0 0 0-.474-.246c-.36-.155-.76-.246-1.17-.246h-2.348c-.41 0-.81.091-1.17.246a4.908 4.908 0 0 0-.474.246 4.67 4.67 0 0 0-.605.5 4.795 4.795 0 0 0-.474.658 4.897 4.897 0 0 0-.326.811c-.168.598-.256 1.233-.256 1.879v2.352c0 .646.088 1.281.256 1.879a4.897 4.897 0 0 0 .326.811 4.795 4.795 0 0 0 .474.658 4.67 4.67 0 0 0 .605.5z" />
                            </svg>
                        </a>
                        <a href="#" class="hover:text-green-400 transition" aria-label="LinkedIn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="currentColor">
                                <path
                                    d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm-2 16H8V11h2v7zm-1-8H9V8h1v2zM16 18h-2v-3c0-1.657-1.343-3-3-3s-3 1.343-3 3v3h-2V11h2v1.5c.618-.844 1.877-1.5 3-1.5 2.206 0 4 1.794 4 4v3z" />
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
        </footer>

    </main>

    <!-- ðŸŒ EXPLORE MODAL -->
    <div id="exploreModal" class="fixed inset-0 bg-black/40 backdrop-blur-sm hidden justify-center items-center z-50">
        <div class="bg-white rounded-3xl shadow-2xl max-w-5xl w-full mx-4 md:mx-0 overflow-hidden animate-fade-in">
            <div class="flex justify-between items-center px-6 py-4 border-b">
                <h3 class="text-xl font-semibold text-green-700">Explore GreenAmmo</h3>
                <button class="text-gray-500 hover:text-green-700" onclick="closeModal()">
                    âœ•
                </button>
            </div>

            <!-- Two-Panel Grid -->
            <div class="grid md:grid-cols-2 gap-6 p-8">
                <!-- Panel 1: GreenAmmo Solutions -->
                <div class="bg-green-50 rounded-2xl p-6 flex flex-col justify-between shadow hover:shadow-md transition cursor-pointer hover:bg-green-100"
                    onclick="window.location.href='/solutions'">
                    <div>
                        <div class="w-full h-40 bg-white rounded-xl flex items-center justify-center mb-4">
                            <p class="text-green-600 text-sm">[Undraw SVG: Business / Growth]</p>
                        </div>
                        <h4 class="text-2xl font-semibold text-green-700 mb-2">GreenAmmo Solutions</h4>
                        <p class="text-gray-600 text-sm leading-relaxed">
                            Professional, scalable services spanning Finance, Education, Events, and Accommodation â€”
                            uniting purpose with performance for sustainable growth.
                        </p>
                    </div>
                    <div class="mt-6">
                        <button class="bg-green-600 text-white px-4 py-2 rounded-xl hover:bg-green-700 transition">
                            Visit Solutions
                        </button>
                    </div>
                </div>

                <!-- Panel 2: GreenAmmo Trust -->
                <div class="bg-emerald-50 rounded-2xl p-6 flex flex-col justify-between shadow hover:shadow-md transition cursor-pointer hover:bg-emerald-100"
                    onclick="window.location.href='/trust'">
                    <div>
                        <div class="w-full h-40 bg-white rounded-xl flex items-center justify-center mb-4">
                            <p class="text-green-600 text-sm">[Undraw SVG: Community / Nature]</p>
                        </div>
                        <h4 class="text-2xl font-semibold text-green-700 mb-2">GreenAmmo Trust</h4>
                        <p class="text-gray-600 text-sm leading-relaxed">
                            Non-profit initiatives for environmental awareness, youth empowerment, and community
                            development â€” turning sustainability into action.
                        </p>
                    </div>
                    <div class="mt-6">
                        <button class="bg-emerald-600 text-white px-4 py-2 rounded-xl hover:bg-emerald-700 transition">
                            Visit Trust
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ðŸ§  JS: Open / Close Logic -->
    <script>
        function openModal() {
            document.getElementById('exploreModal').classList.remove('hidden');
            document.getElementById('exploreModal').classList.add('flex');
        }

        function closeModal() {
            document.getElementById('exploreModal').classList.remove('flex');
            document.getElementById('exploreModal').classList.add('hidden');
        }

    </script>

    <!-- ðŸ’« Optional small fade-in animation -->
    <style>
        @keyframes fade-in {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-fade-in {
            animation: fade-in 0.3s ease-out;
        }
    </style>

</body>

</html>