!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Split=t()}(this,function(){"use strict";var e="undefined"!=typeof window?window:null,t=null===e,i=t?void 0:e.document,o="addEventListener",n="removeEventListener",s="getBoundingClientRect",a="_a",r="_b",l="_c",d="horizontal",c=function(){return!1},u=t?"calc":["","-webkit-","-moz-","-o-"].filter(function(e){var t=i.createElement("div");return t.style.cssText="width:"+e+"calc(9px)",!!t.style.length}).shift()+"calc",p=function(e){return"string"==typeof e||e instanceof String},h=function(e){if(p(e)){var t=i.querySelector(e);if(!t)throw new Error("Selector "+e+" did not match a DOM element");return t}return e},m=function(e,t,i){var o=e[t];return void 0!==o?o:i},g=function(e,t,i,o){if(t){if("end"===o)return 0;if("center"===o)return e/2}else if(i){if("start"===o)return 0;if("center"===o)return e/2}return e},f=function(e,t){var o=i.createElement("div");return o.className="gutter gutter-"+t,o},v=function(e,t,i){var o={};return p(t)?o[e]=t:o[e]=u+"("+t+"% - "+i+"px)",o},y=function(e,t){var i;return(i={})[e]=t+"px",i};return function(u,p){if(void 0===p&&(p={}),t)return{};var S,w,C,b,L,E,k=u;Array.from&&(k=Array.from(k));var M=h(k[0]).parentNode,T=getComputedStyle?getComputedStyle(M):null,x=T?T.flexDirection:null,_=m(p,"sizes")||k.map(function(){return 100/k.length}),q=m(p,"minSize",100),A=Array.isArray(q)?q:k.map(function(){return q}),O=m(p,"maxSize",1/0),j=Array.isArray(O)?O:k.map(function(){return O}),$=m(p,"expandToMin",!1),z=m(p,"gutterSize",10),H=m(p,"gutterAlign","center"),I=m(p,"snapOffset",30),D=Array.isArray(I)?I:k.map(function(){return I}),P=m(p,"dragInterval",1),F=m(p,"direction",d),N=m(p,"cursor",F===d?"col-resize":"row-resize"),R=m(p,"gutter",f),J=m(p,"elementStyle",v),V=m(p,"gutterStyle",y);function B(e,t,i,o){var n=J(S,t,i,o);Object.keys(n).forEach(function(t){e.style[t]=n[t]})}function U(){return E.map(function(e){return e.size})}function G(e){return"touches"in e?e.touches[0][w]:e[w]}function W(e){var t=E[this.a],i=E[this.b],o=t.size+i.size;t.size=e/this.size*o,i.size=o-e/this.size*o,B(t.element,t.size,this[r],t.i),B(i.element,i.size,this[l],i.i)}function K(){var e=E[this.a].element,t=E[this.b].element,i=e[s](),o=t[s]();this.size=i[S]+o[S]+this[r]+this[l],this.start=i[C],this.end=i[b]}function X(e){var t=function(e){if(!getComputedStyle)return null;var t=getComputedStyle(e);if(!t)return null;var i=e[L];return 0===i?null:i-=F===d?parseFloat(t.paddingLeft)+parseFloat(t.paddingRight):parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)}(M);if(null===t)return e;if(A.reduce(function(e,t){return e+t},0)>t)return e;var i=0,o=[],n=e.map(function(n,s){var a=t*n/100,r=g(z,0===s,s===e.length-1,H),l=A[s]+r;return a<l?(i+=l-a,o.push(0),l):(o.push(a-l),a)});return 0===i?e:n.map(function(e,n){var s=e;if(i>0&&o[n]-i>0){var a=Math.min(i,o[n]-i);i-=a,s=e-a}return s/t*100})}function Y(t){if(!("button"in t&&0!==t.button)){var s=E[this.a].element,a=E[this.b].element;this.dragging||m(p,"onDragStart",c)(U()),t.preventDefault(),this.dragging=!0,this.move=function(e){var t,i=E[this.a],o=E[this.b];this.dragging&&(t=G(e)-this.start+(this[r]-this.dragOffset),P>1&&(t=Math.round(t/P)*P),t<=i.minSize+i.snapOffset+this[r]?t=i.minSize+this[r]:t>=this.size-(o.minSize+o.snapOffset+this[l])&&(t=this.size-(o.minSize+this[l])),t>=i.maxSize-i.snapOffset+this[r]?t=i.maxSize+this[r]:t<=this.size-(o.maxSize-o.snapOffset+this[l])&&(t=this.size-(o.maxSize+this[l])),W.call(this,t),m(p,"onDrag",c)(U()))}.bind(this),this.stop=function(){var t=E[this.a].element,o=E[this.b].element;this.dragging&&m(p,"onDragEnd",c)(U()),this.dragging=!1,e[n]("mouseup",this.stop),e[n]("touchend",this.stop),e[n]("touchcancel",this.stop),e[n]("mousemove",this.move),e[n]("touchmove",this.move),this.stop=null,this.move=null,t[n]("selectstart",c),t[n]("dragstart",c),o[n]("selectstart",c),o[n]("dragstart",c),t.style.userSelect="",t.style.webkitUserSelect="",t.style.MozUserSelect="",t.style.pointerEvents="",o.style.userSelect="",o.style.webkitUserSelect="",o.style.MozUserSelect="",o.style.pointerEvents="",this.gutter.style.cursor="",this.parent.style.cursor="",i.body.style.cursor=""}.bind(this),e[o]("mouseup",this.stop),e[o]("touchend",this.stop),e[o]("touchcancel",this.stop),e[o]("mousemove",this.move),e[o]("touchmove",this.move),s[o]("selectstart",c),s[o]("dragstart",c),a[o]("selectstart",c),a[o]("dragstart",c),s.style.userSelect="none",s.style.webkitUserSelect="none",s.style.MozUserSelect="none",s.style.pointerEvents="none",a.style.userSelect="none",a.style.webkitUserSelect="none",a.style.MozUserSelect="none",a.style.pointerEvents="none",this.gutter.style.cursor=N,this.parent.style.cursor=N,i.body.style.cursor=N,K.call(this),this.dragOffset=G(t)-this.end}}F===d?(S="width",w="clientX",C="left",b="right",L="clientWidth"):"vertical"===F&&(S="height",w="clientY",C="top",b="bottom",L="clientHeight"),_=X(_);var Q=[];function Z(e){var t=e.i===Q.length,i=t?Q[e.i-1]:Q[e.i];K.call(i);var o=t?i.size-e.minSize-i[l]:e.minSize+i[r];W.call(i,o)}return(E=k.map(function(e,t){var i,n={element:h(e),size:_[t],minSize:A[t],maxSize:j[t],snapOffset:D[t],i:t};if(t>0&&((i={a:t-1,b:t,dragging:!1,direction:F,parent:M})[r]=g(z,t-1==0,!1,H),i[l]=g(z,!1,t===k.length-1,H),"row-reverse"===x||"column-reverse"===x)){var s=i.a;i.a=i.b,i.b=s}if(t>0){var d=R(t,F,n.element);!function(e,t,i){var o=V(S,t,i);Object.keys(o).forEach(function(t){e.style[t]=o[t]})}(d,z,t),i[a]=Y.bind(i),d[o]("mousedown",i[a]),d[o]("touchstart",i[a]),M.insertBefore(d,n.element),i.gutter=d}return B(n.element,n.size,g(z,0===t,t===k.length-1,H),t),t>0&&Q.push(i),n})).forEach(function(e){var t=e.element[s]()[S];t<e.minSize&&($?Z(e):e.minSize=t)}),{setSizes:function(e){var t=X(e);t.forEach(function(e,i){if(i>0){var o=Q[i-1],n=E[o.a],s=E[o.b];n.size=t[i-1],s.size=e,B(n.element,n.size,o[r],n.i),B(s.element,s.size,o[l],s.i)}})},getSizes:U,collapse:function(e){Z(E[e])},destroy:function(e,t){Q.forEach(function(i){if(!0!==t?i.parent.removeChild(i.gutter):(i.gutter[n]("mousedown",i[a]),i.gutter[n]("touchstart",i[a])),!0!==e){var o=J(S,i.a.size,i[r]);Object.keys(o).forEach(function(e){E[i.a].element.style[e]="",E[i.b].element.style[e]=""})}})},parent:M,pairs:Q}}}),function(){window.log=function(){var e;if(null!=(null!=(e=window.console)?e.log:void 0))return console.log(arguments.length<=1?arguments[0]:arguments)},window.substitute=function(e,t,i){return String(e).replace(i||/\\?\{([^{}]+)\}/g,function(e,i){var o,n,s,a;if("\\"===e.charAt(0))return e.slice(1);if(null!=t[i])return t[i];if("",n=(s=i.split(".")).length,a=t,n<=1)return"";for(o=0;o<n;){if(null===(a=a[s[o]]))return"";o++}return a})},window.arrayContains=function(e,t){return e.indexOf(t)>=0},window.stringifyJSON=function(e){return Object.keys(e).map(function(t){return`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`}).join("&")},window.CookieManager={write:function(e,t,i){var o,n;return i?((o=new Date).setTime(o.getTime()+24*i*60*60*1e3),n="; expires="+o.toUTCString()):n="",document.cookie=e+"="+(t||"")+n+"; path=/"},read:function(e){var t,i,o,n;for(t=e+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(o=i[n];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return null},erase:function(e){return this.write(e,"",-1)}},window.decodeHTMLEntities=function(e){let t=e;if(e){let i=document.createElement("textarea");i.innerHTML=e,t=i.value}return t},this.Helpers=function(){function e(){}return e.isObject=function(e){return e&&"object"==typeof e&&!Array.isArray(e)},e.isPlainObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},e.deepMerge=function(t,...i){for(const o of i)if(o)for(const i in o)e.isPlainObject(o[i])&&e.isPlainObject(t[i])?t[i]=e.deepMerge({},t[i],o[i]):"object"!=typeof o[i]||null===o[i]||o[i]instanceof Array||o[i]instanceof Element?t[i]=o[i]:t[i]=e.deepMerge({},o[i]);return t},e.append=function(){let e=Array.from(arguments);return 0===e.length?{}:1===e.length?e[0]:Object.assign({},...e)},e.extractPartsFromHTML=function(e){let t=null,i="",o="";return e=(e=(e=(e=(e=(e=(e=e.replace(/<title[^>]*>([\s\S]*?)<\/title>/gi,(e,i)=>(t=i.trim(),""))).replace(/<style[^>]*>([\s\S]*?)<\/style>/gi,(e,t)=>(i+=`${t.trim()}\n\n`,""))).replace(/<script([^>]*)>([\s\S]*?)<\/script>/gi,(e,t,i)=>/\btype\s*=\s*(['"])application\/ld\+json\1/i.test(t)||/\bsrc\s*=\s*(['"])[^'"]+\1/i.test(t)?e:(o+=`${i.trim()}\n\n`,""))).replace(/<!DOCTYPE[^>]*>/i,"")).replace(/<\/?(?:html|head(?!er\b)|body)[^>]*>/gi,"")).replace(/<meta[^>]*>/gi,"")).replace(/([ \t]*\n){3,}/g,"\n\n"),{css:i.trim(),js:o.trim(),html:e.trim(),title:t}},e}()}.call(this);class Common{constructor(){this.elements={},this.setupElements()}setupElements(){let e=this;if(this.elements.toggleGroup=document.querySelectorAll(".toggleGroupAssignment"),this.elements.toggleGroup)for(let t of this.elements.toggleGroup)for(let i of t.querySelectorAll("input[type=checkbox]"))i.addEventListener("change",e.toggleGroup)}toggleGroup(e){e.preventDefault(),e.stopPropagation();let t={method:"post",url:PagesConfig.paths.groupAssignment,xsrfHeaderName:"X-CSRF-Token",xsrfCookieName:"csrftoken",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:`name=${this.name}&value=${this.value}&fiddle_id=${this.dataset.fiddleId}`};axios(t).then(function(e){})}}window.CC_DEBUG=!1;class EditorLayout{constructor(){this.timers={run:null,save:null},this.counters={save:0},this.editors={},this.element={tooltips:{},uiprogress:null},this.smallScreen=765}render(e,t){this.element.uiprogress=document.querySelector(".uiprogress"),window.ModalManager=new Modal;let i=()=>{this.renderEditor(),this.sidebar=new Sidebar};if(window.location.search.indexOf("app=")>=1){ModalManager.closeAll();let e=window.location.search.split("app=").pop(),t="";switch(e){case"flexbox":t="css-flexbox-generator";break;default:t=e}ModalManager.show({dataset:{modalId:`modal-${e}`,modalSource:`/${t}`}})}!0===e?i():this.isBlocking()?t?this.adbd(!0):(i(),this.adbd()):i(),window.addEventListener("message",e=>{e.data.loaded&&this.spinnerEnd()})}renderEditor(){window.Grid=new EditorGrid(editor),window.Draft=new EditorDraft(EditorConfig.fiddle.slug),Options.store(),this.setupSponsors(),document.querySelector("#js_lib").addEventListener("change",function(){Actions.loadDependencies(this.value)});let e=document.querySelector("#library_group");e&&e.addEventListener("change",function(){Actions.loadLibraryVersions(this.value)}),this.checkCollaboration(),this.renderBoilerplates(),this.tooltips(),this.checkSmallScreen()}spinnerStart(){this.element.uiprogress.classList.add("active")}spinnerEnd(){setTimeout(()=>{this.element.uiprogress.classList.remove("active")},800)}isSmallScreen(){return matchMedia(`(max-width: ${this.smallScreen}px)`).matches}checkSmallScreen(e){matchMedia(`(max-width: ${this.smallScreen}px)`).addEventListener("change",function(e){e.matches?(window.LAST_GRID_MODE=Options.getValue("layout"),Grid.switchGrid("grid_6",!0)):Grid.switchGrid(`grid_${window.LAST_GRID_MODE}`,!0)})}async tooltips(){window.Popper=await import("https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/+esm"),window.tippyModule=await import("https://cdn.jsdelivr.net/npm/tippy.js@6.3.7/+esm"),window.tippy=tippyModule.default;let e=document.createElement("script");e.src="/js/tooltips.js",e.type="text/javascript",document.body.appendChild(e)}isBlocking(){return"undefined"==typeof _carbonads||"undefined"==typeof _bsa}adbd(e){if(document.querySelector("#modal-whitelist")){if(document.cookie.match(new RegExp("(^| )whitelist-modal=([^;]+)"))||setTimeout(function(){window.ModalManager.show({dataset:{modalId:"modal-whitelist"}}).querySelector(".closeModal").addEventListener("click",function(e){let t=new Date;t.setTime(+t+72e5),window.document.cookie=`whitelist-modal=hidden; expires=${t.toGMTString()}; path=/`})},1e3*Math.floor(30*Math.random())),e){window.ModalManager.show({dataset:{modalId:"modal-whitelist"}}).querySelector(".closeModal").style.display="none",document.querySelector("#actions").style.display="none"}}}updateAuthorSegment(e){document.querySelector("#author-info")}createFlashMessage(e,t){let i=`<ul id="flash-messages">\n      <li class="error">\n        <svg version="1.1" viewBox="0 0 24 24">\n          <g stroke-linecap="round" stroke-width="2" fill="none" stroke-linejoin="round">\n            <path d="M19.0711,4.92893c3.90524,3.90524 3.90524,10.2369 0,14.1421c-3.90524,3.90524 -10.2369,3.90524 -14.1421,0c-3.90524,-3.90524 -3.90524,-10.2369 -1.77636e-15,-14.1421c3.90524,-3.90524 10.2369,-3.90524 14.1421,-1.77636e-15"></path>\n            <path d="M8,12h8"></path>\n          </g>\n        </svg>\n        ${e}\n        <span class="flashActions">\n      <a href="https://github.com/jsfiddle/jsfiddle-users/issues/new?template=1-cannot-save-fiddle.yml" target="_blank">Report this problem</a>\n    </span>\n      </li>\n    </ul>`;document.querySelector("#flash-messages").remove(),document.body.insertAdjacentHTML("beforeend",i),this.flashMessage()}flashMessage(){let e=document.querySelector("#flash-messages");setTimeout(()=>{e.classList.add("hidden")},5e3),e.addEventListener("click",()=>{e.classList.add("hidden")})}loopEditors(e){const t=Layout.editors;for(const i in t)t.hasOwnProperty(i)&&e.call(this,t[i])}switchEditorTheme(e){this.loopEditors(t=>{t.setOption("theme",`vs-jsfiddle-${e}`)})}checkCollaboration(){document.location.hash.indexOf("&togetherjs")>=1&&Actions.launchCollaboration()}showFallback(){setTimeout(function(){if("undefined"==typeof ethicalads){let e=document.querySelector(".twitterCont");e&&(e.classList.add("doSpecial"),e.innerHTML='<a target="_blank" href="https://www.digitalocean.com/?refcode=52e7a0ad196d&utm_campaign=Referral_Invite&utm_medium=Referral_Program&utm_source=badge">\n            <img src="https://web-platforms.sfo2.cdn.digitaloceanspaces.com/WWW/Badge%203.svg" alt="DigitalOcean Referral Badge" />\n            JSFiddle users get <em>$200</em> in credits on DigitalOcean ðŸ¤˜\n            </a>')}},4e3)}ethicalAds(){let e=document.createElement("script");e.src="//media.ethicalads.io/media/client/ethicalads.min.js",e.type="text/javascript",document.body.appendChild(e),e.onload=function(){ethicalads.load()},this.showFallback()}setupSponsors(){setTimeout(()=>{let e=document.querySelector("#support-jsfiddle"),t=document.querySelector("#fallback"),i=document.querySelector("#carbonads");"undefined"!=typeof _carbonads&&null===i&&(this.ethicalAds(),t&&t.classList.add("show"),e&&e.classList.remove("show")),"undefined"==typeof _carbonads&&null===i&&e&&e.classList.add("show"),null===i&&this.showFallback()},1500)}renderBoilerplates(){let e=document.querySelector(".resultsCont");if(this.hideBoilerplates(),""===EditorConfig.fiddle.slug){e.insertAdjacentHTML("beforeend",'<section id="boilerplates">\n      <h3>Start with a boilerplate:</h3>\n      <ul class="boilerplates">\n        <li><a href="/boilerplate/tailwind-css-checkboxes">Tailwind Checkboxes</a></li>\n        <li><a href="/boilerplate/module-import">Import a JS Module</a></li>\n        <li><a href="/boilerplate/jquery">jQuery</a></li>\n        \x3c!-- <li><a href="/boilerplate/vue">Vue</a></li> --\x3e\n        <li><a href="/boilerplate/react-jsx">React</a></li>\n        <li><a href="/boilerplate/react-jsx">React + JSX</a></li>\n        <li><a href="/boilerplate/preact">Preact</a></li>\n        <li><a href="/boilerplate/typescript">TypeScript</a></li>\n        <li><a href="/boilerplate/coffeescript">CoffeeScript</a></li>\n        <li><a href="/boilerplate/scss">SCSS</a></li>\n        <li><a href="/boilerplate/responsive-css-grid">CSS Grid</a></li>\n        <li><a href="/boilerplate/bootstrap">Bootstrap</a></li>\n        <li><a href="/boilerplate/postcss">PostCSS</a></li>\n      </ul>\n    </section>'),e.querySelectorAll(".boilerplates a").forEach(function(e){e.addEventListener("click",function(t){Track.ui(`Boostrap picked (${e.innerHTML})`),t.preventDefault(),t.stopPropagation(),document.location.href=e.href})})}}hideBoilerplates(){let e=document.querySelector("#boilerplates");e&&e.remove()}isUser(){return EditorConfig.currentUser}registerEditor(e){this.editors[e.options.name]=e}setTitle(e){document.querySelector(Actions.options.titleSelector).value=e}documentToPanels(e,t){e.preventDefault(),e.stopPropagation();let i=Helpers.extractPartsFromHTML(t);this.editors.html.setCode(i.html),this.editors.js.appendCode(i.js),this.editors.css.appendCode(i.css),i.title&&this.setTitle(i.title)}request(e,t,i=null,o){import("https://cdn.jsdelivr.net/npm/axios@1.9.0/+esm").then(n=>{const s=n.default;s.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8",s.defaults.xsrfHeaderName="X-CSRF-Token",s.defaults.xsrfCookieName="csrftoken",s[e](t,i).then(o.complete).catch(o.error)})}loadCodeCompletion(){import("./services/CodeCompletion.js").then(e=>{const t=e.default;window.CodeCompletionManager=new t})}}window.JSFiddle.Layout=window.Layout=new EditorLayout;class Console{constructor(){window.addEventListener("message",e=>{if(e.data.console){let t=e.data.console.type,i=(()=>"system"===t?`â˜ï¸ ${e.data.console.payload}`:"error"===t?this.addLineLink(e.data.console.payload):this.format(e.data.console.payload))();this.pushOutput(i,t)}}),this.commandsHistory=[],this.historyLocation=this.commandsHistory.length,this.element={resultsPanel:document.querySelector(".resultsCont"),console:null,summary:null,output:null,header:null,clear:null,input:null},this.createLayout()}createLayout(){this.element.console=document.createElement("div"),this.element.console.id="console",this.isVisible()||this.element.resultsPanel.classList.add("minimized"),this.element.output=document.createElement("ul"),this.element.output.id="console-output",this.element.input=document.createElement("input"),this.element.input.id="console-input",this.element.input.type="text",this.element.input.placeholder=">_",this.element.input.addEventListener("keyup",e=>{if(13===e.keyCode){e.stopPropagation(),e.preventDefault();let t=e.target.value;this.element.resultsPanel.querySelector("iframe").contentWindow.postMessage({console:{payload:t}},"*"),this.addHistory(t),e.target.value=""}38===e.keyCode&&this.previousHistory(),40===e.keyCode&&this.nextHistory()}),this.element.header=document.createElement("section"),this.element.header.classList.add("header"),this.element.header.innerHTML='\n      <svg class="logo" height="16" version="1.1" viewBox="0 0 24 24"><g stroke-linecap="round" stroke-width="1.8" fill="none" stroke-linejoin="round"><polyline points="4,17 10,11 4,5"></polyline><line x1="12" x2="20" y1="19" y2="19"></line></g></svg>\n      <h3>Console</h3>\n      <div class="consoleActions">\n        <a id="console-clear" href="#">Clear console</a>\n        <a id="console-minimize" href="#">Minimize</a>\n      </div>\n    ',this.element.header.addEventListener("click",e=>{this.element.resultsPanel.classList.contains("minimized")&&(this.show(),this.element.input.focus())}),this.element.summary=document.createElement("div"),this.element.summary.id="console-summary",this.element.resultsPanel.append(this.element.console),this.element.console.append(this.element.header),this.element.header.append(this.element.summary),this.element.console.append(this.element.output),this.element.console.append(this.element.input),this.element.clear=this.element.console.querySelector("#console-clear"),this.element.clear.addEventListener("click",this.clear.bind(this)),this.element.minimize=this.element.console.querySelector("#console-minimize"),this.element.minimize.addEventListener("click",this.minimize.bind(this)),this.pushOutput("JSFiddle Console. Turn on/off in Editor settings.","system")}updateInput(){this.commandsHistory[this.historyLocation]&&(this.element.input.value=this.commandsHistory[this.historyLocation])}previousHistory(){this.historyLocation>=0&&(this.historyLocation=this.historyLocation-1,this.updateInput())}nextHistory(){this.historyLocation<this.commandsHistory.length&&(this.historyLocation=this.historyLocation+1,this.updateInput())}addHistory(e){this.commandsHistory.push(e)}minimize(e){e.preventDefault(),e.stopPropagation(),this.hide()}clear(e){e&&(e.preventDefault(),e.stopPropagation()),this.element.output.innerHTML="",this.updateSummary()}isVisible(){return localStorage.getItem("console-visible")}hide(){localStorage.removeItem("console-visible"),this.element.resultsPanel.classList.add("minimized")}show(){localStorage.setItem("console-visible",!0),this.element.resultsPanel.classList.remove("minimized")}addLineLink(e){return e}pushOutput(e,t){let i=document.createElement("li");i.textContent=e,i.classList.add(t),this.element.output.append(i),this.updateSummary(),this.element.console.scrollTo(0,this.element.console.scrollHeight)}linkErrorLine(e){let t=e.querySelector(".gotoLine");if(t){let e=t.href.split("#").pop(),i=e.split(":");e={line:i[0]-1,ch:i[1]-1},t.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),Layout.editors.js.editor.focus(),Layout.editors.js.editor.doc.setCursor(e)})}}updateSummary(){let e=this.element.output.querySelectorAll(".log"),t=this.element.output.querySelectorAll(".info"),i=this.element.output.querySelectorAll(".error"),o=this.element.output.querySelectorAll(".warn"),n=e=>e.length>=1?"active":"";this.element.summary.innerHTML=`\n    <span class="log ${n(e)}">\n      <svg height="12" version="1.1" viewBox="0 0 24 24"><g stroke-linecap="round" stroke-width="1.8" fill="none" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" x2="12" y1="8" y2="12"></line><line x1="12" x2="12.01" y1="16" y2="16"></line></g></svg>${e.length}\n    </span>\n    <span class="info ${n(t)}">\n      <svg height="12" version="1.1" viewBox="0 0 24 24"><g stroke-linecap="round" stroke-width="2" fill="none" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" x2="12" y1="8" y2="12"></line><line x1="12" x2="12.01" y1="16" y2="16"></line></g></svg>${t.length}\n    </span>\n    <span class="warn ${n(o)}">\n      <svg height="12" version="1.1" viewBox="0 0 24 24"><g stroke-linecap="round" stroke-width="2" fill="none" stroke-linejoin="round"><path d="M10.29 3.86l-8.47 14.14 -7.80912e-08 1.35236e-07c-.552351.956547-.224686 2.17975.73186 2.7321 .297614.171855.634491.264121.97814.267898h16.94l-1.12917e-07 1.24109e-09c1.1045-.0121397 1.99004-.917357 1.9779-2.02186 -.00377709-.343648-.0960428-.680526-.267898-.97814l-8.47-14.14 1.92952e-08 3.18097e-08c-.572861-.944407-1.80285-1.2456-2.74726-.672744 -.275097.166869-.505875.397647-.672744.672744Z"></path><line x1="12" x2="12" y1="9" y2="13"></line><line x1="12" x2="12.01" y1="17" y2="17"></line></g></svg>${o.length}\n    </span>\n    <span class="error ${n(i)}">\n      <svg height="12" version="1.1" viewBox="0 0 24 24"><g stroke-linecap="round" stroke-width="2" fill="none" stroke-linejoin="round"><polygon points="7.86,2 16.14,2 22,7.86 22,16.14 16.14,22 7.86,22 2,16.14 2,7.86 7.86,2"></polygon><line x1="12" x2="12" y1="8" y2="12"></line><line x1="12" x2="12.01" y1="16" y2="16"></line></g></svg>${i.length}\n    </span>\n    `}format(e){return e=(e=e.replace(/\[object\ Object\]\ /gi,"")).replace(/\[([\s\S]*)\]/im,"$1")}}class EditorGrid{constructor(e){this.currentInstance=null,this.currentGrid="grid_1",this.labelTimeout=setTimeout(()=>{this.hideSizeLabel()},2e3),this.currentResults,this.sizeLabel=this,this.editor=e,this.templates={},this.config={};let t=this;this.templates.label=function(e){return`\n        <div class="windowLabelCont">\n          <span class="windowLabel ${e?"hidden":""}">\n            ${I18n.editor.panels.result}\n          </span>\n          <em class="size">0px</em>\n        </div>`},this.templates.renderPanel=function(){return`\n        <div class="resultsCont">\n          <div class="iframeCont">\n            <iframe name="result"\n              allow="camera *; display-capture *; geolocation *; microphone *; web-share *; clipboard-write *;clipboard-read *;"\n              sandbox="allow-downloads allow-forms allow-modals allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation allow-clipboard-read allow-clipboard-write"\n              allowfullscreen="true"\n              allowtransparency="true"\n              allowpaymentrequest="true"\n              frameBorder="0" src="${EditorConfig.paths.render}" loading="lazy">\n            </iframe>\n          </div>\n          ${this.label(EditorConfig.shell)}\n        </div>`},this.templates.panelSettings=function(e,i){return`\n        <div class="windowLabelCont codeLang_${e}">\n          <a id="panel-settings-${e}" class="windowLabel showModalTrigger" data-panel="${e}" data-modal-id="modal-panel-options" data-trigger-check="#panel-settings-section-${e}">\n            <span class="label">${i}</span>\n            <div class="iconCont"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g stroke-linejoin="round" stroke-linecap="round" stroke-width="2.2" fill="none" class="nc-icon-wrapper"><path d="M6 9l6 6 6-6"></path></g></svg></div>\n          </a>\n          <a class="panelTidy" data-panel="${e}" data-tippy-simple-content="${I18n.editor.panels.tidy}">\n          <svg width="20" height="20" viewBox="0 0 16 16" fill="none"><path d="M3.707 1.815 C 3.450 1.931,3.282 2.167,3.260 2.442 C 3.235 2.750,3.376 3.005,3.657 3.161 L 3.800 3.240 6.000 3.240 L 8.200 3.240 8.337 3.168 C 8.614 3.022,8.765 2.750,8.740 2.442 C 8.718 2.167,8.550 1.931,8.293 1.815 C 8.176 1.762,8.128 1.761,6.000 1.761 C 3.872 1.761,3.824 1.762,3.707 1.815 M10.740 1.798 C 10.429 1.909,10.208 2.274,10.257 2.595 C 10.300 2.873,10.520 3.136,10.775 3.211 C 10.965 3.268,11.538 3.269,11.726 3.213 C 11.907 3.159,12.108 2.978,12.186 2.796 C 12.259 2.625,12.254 2.340,12.173 2.173 C 12.099 2.021,11.915 1.852,11.769 1.803 C 11.607 1.747,10.891 1.744,10.740 1.798 M3.707 5.309 C 3.110 5.578,3.102 6.402,3.693 6.683 C 3.826 6.746,3.834 6.746,4.749 6.746 L 5.671 6.747 5.835 6.665 C 6.106 6.530,6.247 6.302,6.247 6.000 C 6.247 5.698,6.106 5.470,5.835 5.335 L 5.671 5.253 4.749 5.254 C 3.880 5.254,3.820 5.258,3.707 5.309 M8.293 5.278 C 7.978 5.374,7.761 5.668,7.761 6.000 C 7.761 6.395,8.050 6.709,8.442 6.740 C 8.751 6.765,9.006 6.624,9.160 6.343 C 9.227 6.221,9.238 6.171,9.238 6.000 C 9.238 5.829,9.227 5.779,9.160 5.657 C 9.065 5.483,8.915 5.350,8.752 5.295 C 8.625 5.251,8.407 5.244,8.293 5.278 M11.237 5.296 C 11.083 5.351,10.917 5.502,10.833 5.663 C 10.774 5.776,10.761 5.835,10.761 6.000 C 10.761 6.242,10.841 6.420,11.016 6.569 C 11.224 6.748,11.243 6.750,12.550 6.741 C 13.692 6.734,13.723 6.732,13.827 6.676 C 14.085 6.536,14.239 6.284,14.239 6.000 C 14.239 5.716,14.085 5.464,13.827 5.324 C 13.722 5.268,13.695 5.267,12.533 5.262 C 11.544 5.257,11.328 5.263,11.237 5.296 M3.779 8.785 C 3.426 8.911,3.228 9.211,3.260 9.569 C 3.278 9.763,3.349 9.905,3.499 10.044 C 3.706 10.235,3.761 10.245,4.548 10.235 L 5.240 10.227 5.364 10.154 C 5.700 9.956,5.841 9.532,5.681 9.195 C 5.597 9.017,5.399 8.840,5.225 8.789 C 5.036 8.732,3.934 8.730,3.779 8.785 M7.779 8.785 C 7.426 8.911,7.228 9.211,7.260 9.569 C 7.284 9.836,7.454 10.071,7.707 10.185 C 7.824 10.237,7.874 10.239,9.735 10.239 C 11.881 10.240,11.799 10.247,12.007 10.044 C 12.163 9.893,12.222 9.758,12.235 9.531 C 12.249 9.283,12.178 9.112,11.994 8.946 C 11.765 8.740,11.835 8.747,9.735 8.748 C 8.245 8.749,7.860 8.756,7.779 8.785 M3.808 12.277 C 3.120 12.466,3.065 13.402,3.724 13.700 C 3.817 13.742,3.956 13.747,5.253 13.747 L 6.680 13.747 6.805 13.684 C 7.062 13.557,7.253 13.265,7.253 13.000 C 7.253 12.735,7.062 12.443,6.805 12.316 L 6.680 12.253 5.307 12.248 C 4.252 12.244,3.904 12.250,3.808 12.277 " stroke="none" fill="currentColor" fill-rule="evenodd"></path></svg>\n          </a>\n          ${t.additionalTools(e)}\n        </div>\n        <div class="panelActionsCont"></div>`},this.templates.grids={grid_1:`\n        <div class="panel-v left">\n          <div class="panel-h panel">\n            ${this.templates.panelSettings("html","HTML")}\n            <div id="panel-code-html"></div>\n          </div>\n          <div class="panel-h panel">\n            ${this.templates.panelSettings("js","JavaScript")}\n            <div id="panel-code-js"></div>\n          </div>\n        </div>\n        <div class="panel-v right">\n          <div class="panel-h panel">\n            ${this.templates.panelSettings("css","CSS")}\n            <div id="panel-code-css"></div>\n          </div>\n          <div class="panel-h panel resultsPanel">\n            ${this.templates.renderPanel()}\n          </div>\n        </div>`,grid_2:`\n        <div class="panel-v panel">\n          ${this.templates.panelSettings("html","HTML")}\n          <div id="panel-code-html"></div>\n        </div>\n        <div class="panel-v panel">\n          ${this.templates.panelSettings("js","JavaScript")}\n          <div id="panel-code-js"></div>\n        </div>\n        <div class="panel-v panel">\n          ${this.templates.panelSettings("css","CSS")}\n          <div id="panel-code-css"></div>\n        </div>\n        <div class="panel-v panel resultsPanel">\n          ${this.templates.renderPanel()}\n        </div>`,grid_3:`\n        <div class="panel-h">\n          <div class="panel-v panel">\n            ${this.templates.panelSettings("html","HTML")}\n            <div id="panel-code-html"></div>\n          </div>\n          <div class="panel-v panel">\n            ${this.templates.panelSettings("js","JavaScript")}\n            <div id="panel-code-js"></div>\n          </div>\n          <div class="panel-v panel">\n            ${this.templates.panelSettings("css","CSS")}\n            <div id="panel-code-css"></div>\n          </div>\n        </div>\n        <div class="panel-h panel resultsPanel">\n          ${this.templates.renderPanel()}\n        </div>`,grid_4:`\n        <div class="panel-v">\n          <div class="panel-h panel">\n            ${this.templates.panelSettings("html","HTML")}\n            <div id="panel-code-html"></div>\n          </div>\n          <div class="panel-h panel">\n            ${this.templates.panelSettings("js","JavaScript")}\n            <div id="panel-code-js"></div>\n          </div>\n          <div class="panel-h panel">\n            ${this.templates.panelSettings("css","CSS")}\n            <div id="panel-code-css"></div>\n          </div>\n        </div>\n        <div class="panel-v panel resultsPanel">\n          ${this.templates.renderPanel()}\n        </div>`,grid_5:`\n        <div id="tabs">\n          <ul>\n            <li class="active tabItem"><a href="" data-lang="html">HTML</a></li>\n            <li class="tabItem"><a href="" data-lang="js">JavaScript</a></li>\n            <li class="tabItem"><a href="" data-lang="css">CSS</a></li>\n          </ul>\n        </div>\n        <div class="tabsContainer">\n          <div class="panel-v panel">\n            <div class="tabCont panel">\n              ${this.templates.panelSettings("html","HTML")}\n              <div id="panel-code-html"></div>\n            </div>\n            <div class="tabCont panel hidden">\n              ${this.templates.panelSettings("js","JavaScript")}\n              <div id="panel-code-js"></div>\n            </div>\n            <div class="tabCont panel hidden">\n              ${this.templates.panelSettings("css","CSS")}\n              <div id="panel-code-css"></div>\n            </div>\n          </div>\n          <div class="panel-v panel resultsPanel">\n            ${this.templates.renderPanel()}\n          </div>\n        </div>`,grid_6:`\n        <div id="tabs" class="tabsH">\n          <ul>\n            <li class="active tabItem"><a href="" data-lang="html">HTML</a></li>\n            <li class="tabItem"><a href="" data-lang="js">JavaScript</a></li>\n            <li class="tabItem"><a href="" data-lang="css">CSS</a></li>\n          </ul>\n        </div>\n        <div class="tabsContainer tabsH">\n          <div class="panel-h panel">\n            <div class="tabCont panel">\n              ${this.templates.panelSettings("html","HTML")}\n              <div id="panel-code-html"></div>\n            </div>\n            <div class="tabCont panel hidden">\n              ${this.templates.panelSettings("js","JavaScript")}\n              <div id="panel-code-js"></div>\n            </div>\n            <div class="tabCont panel hidden">\n              ${this.templates.panelSettings("css","CSS")}\n              <div id="panel-code-css"></div>\n            </div>\n          </div>\n          <div class="panel-h panel resultsPanel">\n            ${this.templates.renderPanel()}\n          </div>\n        </div>`},this.config.grid={grid_1:{structure:this.templates.grids.grid_1,init:()=>{var e=document.querySelectorAll("#editor .panel-v"),t=Split(e,this.setPanelOptions({showSizeLabel:!0})),i=document.querySelectorAll("#editor .panel-v.left .panel-h"),o=Split(i,this.setPanelOptions({direction:"vertical"})),n=document.querySelectorAll("#editor .panel-v.right .panel-h");return[t,o,Split(n,this.setPanelOptions({direction:"vertical"}))]}},grid_2:{structure:this.templates.grids.grid_2,init:()=>{var e=document.querySelectorAll("#editor .panel-v");return[Split(e,this.setPanelOptions({showSizeLabel:!0}))]}},grid_3:{structure:this.templates.grids.grid_3,init:()=>{var e=document.querySelectorAll("#editor .panel-h"),t=Split(e,this.setPanelOptions({direction:"vertical",showSizeLabel:!0})),i=document.querySelectorAll("#editor .panel-v");return[t,Split(i,this.setPanelOptions())]}},grid_4:{structure:this.templates.grids.grid_4,init:()=>{var e=document.querySelectorAll("#editor .panel-v"),t=Split(e,this.setPanelOptions({showSizeLabel:!0})),i=document.querySelectorAll("#editor .panel-h");return[t,Split(i,this.setPanelOptions({direction:"vertical"}))]}},grid_5:{structure:this.templates.grids.grid_5,init:()=>{this.activateTabs();var e=document.querySelectorAll("#editor .panel-v");return[Split(e,this.setPanelOptions({showSizeLabel:!0}))]}},grid_6:{structure:this.templates.grids.grid_6,init:()=>{this.activateTabs();var e=document.querySelectorAll("#editor .panel-h");return[Split(e,this.setPanelOptions({showSizeLabel:!0,direction:"vertical"}))]}}}}additionalTools(e){return"css"===e?"":"html"===e?"":"js"===e?'<span class="isModuleInfo" data-tippy-placement="auto" data-tippy-simple-content="You can import/export other fiddles as modules, for example: <br><code>import moduleName from \'@jsfiddle/oskar/9s8a71.js\'</code>"><em>Module</em></span>':""}hideSizeLabel(){this.sizeLabel.classList.add("hidden")}manageSizeLabel(e,t){var i=Math.round(e.getBoundingClientRect().width);t.innerText=`${i}px`,t.classList.remove("hidden"),this.labelTimeout&&clearTimeout(this.labelTimeout),this.labelTimeout=setTimeout(()=>{this.hideSizeLabel()},2e3)}activateTabs(){var e=Array.from(document.querySelectorAll("#tabs a")),t=Array.from(document.querySelectorAll(".tabCont"));e.forEach(function(i,o){i.addEventListener("click",function(n){n.stopPropagation(),n.preventDefault(),t.forEach(function(e){e.classList.add("hidden")}),e.forEach(function(e){e.parentNode.classList.remove("active")}),t[o].classList.remove("hidden"),i.parentNode.classList.add("active"),Layout.editors[i.dataset.lang].editor.focus()})})}getElements(e){var t=document.querySelectorAll(e);return Array.from(t)}getSize(){for(var e=[],t=0;t<this.currentInstance.length;t++)e.push(this.currentInstance[t].getSizes());return e}setSize(){var e=this.currentGrid,t=JSON.parse(localStorage.getItem(`${e}-split-sizes`));if(t)for(var i=0;i<this.currentInstance.length;i++)this.currentInstance[i].setSizes(t[i])}saveSize(){var e=this.currentGrid;localStorage.setItem(`${e}-split-sizes`,JSON.stringify(this.getSize()))}setPanelOptions(e){let t=Helpers.deepMerge({direction:"horizontal",minSize:45,snapOffset:10,gutterSize:1,onDragEnd:()=>{this.saveSize()}},e);return e&&e.showSizeLabel&&(this.currentResults=document.querySelector(".resultsPanel"),this.sizeLabel=document.querySelector(".resultsPanel .size"),t.onDrag=(()=>{this.manageSizeLabel(this.currentResults,this.sizeLabel)})),t}loadOther(){let e=localStorage.getItem("JSFIDDLE_mistral_api_key");if(e&&e.length>=25){let t=document.querySelector("input[name=mistral_api_key]");t&&(t.value=e,Layout.loadCodeCompletion())}}switchGrid(e){this.currentGrid=e,this.config.grid[e]&&(Layout.isSmallScreen()&&(e="grid_6"),(Layout.editors.html||Layout.editors.js||Layout.editors.css)&&(Layout.editors.html.dispose(),Layout.editors.js.dispose(),Layout.editors.css.dispose()),this.editor.innerHTML=this.config.grid[e].structure,this.currentInstance=this.config.grid[e].init(),document.body.classList.add(`gridMode_${e}`),this.setSize(),new EditorPanel.JS(document.querySelector("#panel-code-js"),{language:EditorConfig.panels.js,syntax:EditorConfig.syntax.js,value:document.querySelector("textarea[name=code_js]").value}),new EditorPanel.HTML(document.querySelector("#panel-code-html"),{language:EditorConfig.panels.html,syntax:EditorConfig.syntax.html,value:document.querySelector("textarea[name=code_html]").value}),new EditorPanel.CSS(document.querySelector("#panel-code-css"),{language:EditorConfig.panels.css,syntax:EditorConfig.syntax.css,value:document.querySelector("textarea[name=code_css]").value}),this.loadOther(),this.manageSizeLabel(this.currentResults,this.sizeLabel),window.JSFiddle.Console=window.ConsoleManager=new Console,Layout.renderBoilerplates())}}class EditorDraft{constructor(e){if(this.get(e)){let t=document.querySelector("#flash-messages"),i=t.querySelector("#apply-draft"),o=t.querySelector("#discard-draft");setTimeout(()=>{t.classList.remove("hidden")},1e3),i.addEventListener("click",i=>{i.preventDefault(),i.stopPropagation(),this.apply(e),t.classList.add("hidden")}),o.addEventListener("click",i=>{i.preventDefault(),i.stopPropagation(),this.discard(e),t.classList.add("hidden")})}}store(e){let t=JSON.stringify({html:Layout.editors.html.getCode(),css:Layout.editors.css.getCode(),js:Layout.editors.js.getCode()});sessionStorage.setItem(`draft[${e}]`,t)}get(e){let t=sessionStorage.getItem(`draft[${e}]`);return t?JSON.parse(t):null}apply(e){let t=this.get(e);if(t){for(const e in Layout.editors)if(Layout.editors.hasOwnProperty(e)){const i=Layout.editors[e];t[i.options.name]&&i.setCode(t[i.options.name])}this.discard(e)}}discard(e){sessionStorage.removeItem(`draft[${e}]`)}}class Sidebar{constructor(e){const t=this;this.elements={sidebar:document.querySelector("#sidebar"),sections:document.querySelectorAll("#sidebar .sidebarItem"),toggle:document.querySelector(".sidebarToggle a"),apiKey:document.querySelector("input[name=mistral_api_key]")},this.options=e,this.sections=this.elements.sections,this.elements.sidebar.addEventListener("click",function(e){e.target.classList.contains("toggler")&&!e.target.classList.contains("showModalTrigger")&&t.showItem.call(t,e)}),this.elements.toggle.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),EditorConfig.is_pro?(document.body.classList.toggle("noSidebar"),t.toggleSidebarTooltip()):window.ModalManager.show({dataset:{modalId:"modal-pro"}})}),this.elements.apiKey&&this.elements.apiKey.addEventListener("keyup",()=>{let e=this.elements.apiKey.value;e.length>=25?(localStorage.setItem("JSFIDDLE_mistral_api_key",e),window.CodeCompletionManager||(CC_DEBUG&&console.log("Set API Key + load CC"),Layout.spinnerStart(),Layout.loadCodeCompletion())):(CC_DEBUG&&console.log("Removed API Key"),localStorage.removeItem("JSFIDDLE_mistral_api_key"),window.CodeCompletionManager&&(CC_DEBUG&&console.log("Unload CC"),window.CodeCompletionManager.unregisterCompletion(),delete window.CodeCompletionManager))}),t.toggleSidebarTooltip()}toggleSidebarTooltip(){document.body.classList.contains("noSidebar")?(this.enableTooltip(),this.hideItems(),this.setVisibilityState()):(this.disableTooltip(),this.deleteVisibilityState())}enableTooltip(){Layout.element.tooltips.sidebarMain&&Layout.element.tooltips.sidebarMain.enable()}disableTooltip(){Layout.element.tooltips.sidebarMain&&Layout.element.tooltips.sidebarMain.disable()}show(){document.body.classList.remove("noSidebar"),this.disableTooltip()}hideItems(){for(const[e,t]of this.sections.entries())t.classList.remove("opened")}setVisibilityState(){CookieManager.write("JSFIDDLE_sv","hidden",200)}deleteVisibilityState(){}showItem(e){e.preventDefault(),e.stopPropagation();const t=e.target.parentNode;if(t.classList.contains("opened")?t.classList.remove("opened"):(this.hideItems(),t.classList.add("opened")),this.show(),e.target.parentNode.classList.contains("si_resources")){let e=EditorConfig.experimental_resources?"New":"Classic";import(`./services/Resources${e}.js`).then(e=>{window.JSFiddle.Resources=new e.default})}}}class EditorOptions{constructor(){this.storageKey="JSFIDDLE_editor_options";let e=document.querySelectorAll("#theme input, #layout input, #editor-options input, #editor-options select"),t=this;for(const i of e)i.addEventListener("change",function(e){t.modify(this,e)})}modify(e,t){let i="checkbox"===e.type?e.checked:e.value,o=e.name;if(i=(e=>parseInt(e)>=0?parseInt(e):e)(i),window.defaultEditorOptions[o]===i?delete window.userCmOptions[o]:window.userCmOptions[o]=i,"themeMode"===o&&(1===i&&(document.querySelector("html").style="color-scheme: light dark",CookieManager.write("JSFIDDLE_theme","system",200),window.matchMedia&&(window.matchMedia("(prefers-color-scheme: dark)").matches?Layout.switchEditorTheme("dark"):Layout.switchEditorTheme("light"))),2===i&&(document.querySelector("html").style="color-scheme: light",document.body.classList.remove("darkMode"),CookieManager.write("JSFIDDLE_theme","light",200),Layout.switchEditorTheme("light")),3===i&&(document.querySelector("html").style="color-scheme: dark",document.body.classList.add("darkMode"),CookieManager.write("JSFIDDLE_theme","dark",200),Layout.switchEditorTheme("dark"))),"renderValidationDecorations"===o&&i&&(i||(document.querySelector("#editor-options input[name='autoRunValid']").checked=!1)),"autoRunValid"===o&&i&&(document.querySelector("#editor-options input[name='renderValidationDecorations']").checked=!0),Layout.loopEditors(e=>{e.setOption(o,i),"fontSize"===o&&i<=5&&e.setOption(o,12)}),Layout.isUser()?t&&this.permastore(o,i):this.tempstore(window.userCmOptions),"layout"===o&&Grid.switchGrid(`grid_${i}`,!0),"editorConsole"===o){let e=document.querySelector("#layout-container"),t=document.querySelector(".resultsCont"),o={render:EditorConfig.paths.render,display:e.action};i?(t.classList.add("consoleEnabled"),EditorConfig.paths.render=`${o.render}?editor_console=true`,e.action=`${o.display}?editor_console=true`):(t.classList.remove("consoleEnabled"),EditorConfig.paths.render=o.render.split("?editor_console=true")[0],e.action=o.display.split("?editor_console=true")[0])}Track.ui(`Changed editor settings: ${o}`)}tempstore(e){window.localStorage.setItem(this.storageKey,JSON.stringify(e))}permastore(e,t){let i=new URLSearchParams({key:e,value:t});Layout.request("post",EditorConfig.paths.saveSettings,i,{complete:e=>{},error:e=>{console.log(`Cannot save editor settings: ${response.data.error}`)}})}getOptions(){let e={};EditorUISettings;if(Layout.isUser())e=EditorUISettings;else{let t=window.localStorage[this.storageKey];e=t?JSON.parse(t):{},e=Object.assign(EditorUISettings,e)}return e||{}}getValue(e){let t=this.getOptions(),i=null;return i=void 0===t[e]?window.defaultEditorOptions[e]:t[e]}store(){window.userCmOptions=this.getOptions();let e=window.userCmOptions;for(const t in e){let i=e[t],o=document.querySelector(`#theme *[name=${t}], #layout *[name=${t}], #editor-options *[name=${t}]`);o&&("radio"===o.type&&(o=document.querySelector(`input[name="${t}"][value="${i}"]`)),"checkbox"===o.type||"radio"===o.type?o.checked=i:o.value=i,this.modify(o,null))}}}window.lintersLoaded=!1,window.CA_SAVE_COUNTER=0;class EditorActions{constructor(){this.options={formId:"#layout-container",saveId:"#save",forkId:"#fork",runId:"#run",favId:"#mark_favourite",privacyId:"#toggle-privacy",entriesSelector:"textarea",resultLabel:"result_label",resultInput:"select_link",collaborateId:"#collaborate",downloadId:"#download",embedId:"#share-embed",titleSelector:".fiddleAuthor input[name=title]",tidy:{javascript:"js","javascript 1.7":"js",html:"html",css:"css"}},this.editorValidates=!0,document.querySelector(this.options.saveId).addEventListener("click",this.save.bind(this)),document.querySelector(this.options.forkId).addEventListener("click",this.fork.bind(this)),document.querySelector(this.options.runId).addEventListener("click",this.run.bind(this)),document.querySelector(this.options.favId).addEventListener("click",this.setAsBase.bind(this)),document.querySelector(this.options.collaborateId).addEventListener("click",this.launchCollaboration.bind(this)),document.querySelector(this.options.privacyId).addEventListener("click",this.setPrivacy.bind(this)),document.querySelector(this.options.downloadId).addEventListener("click",this.download.bind(this)),document.querySelector(this.options.embedId).addEventListener("click",this.embed.bind(this)),this.form=document.querySelector(this.options.formId),this.form.addEventListener("submit",function(e){e.preventDefault(),e.stopPropagation()}),document.querySelectorAll(".panelChoice").forEach(e=>{e.addEventListener("change",this.switchLanguageAction.bind(this))}),document.querySelectorAll(".panelExtrasChoice select").forEach(e=>{e.addEventListener("change",this.switchLanguageAction.bind(this))}),document.body.addEventListener("change",e=>{e.target&&"faux_expiration_days"===e.target.name&&(document.querySelector("#expiration-period").value=e.target.value)}),window.Options=new EditorOptions,this.autoSave()}runOnTimer(){clearTimeout(Layout.timers.run),Layout.timers.run=setTimeout(()=>{Actions.run()},900)}autoRun(){let e=Options.getValue("autoRun"),t=Options.getValue("autoRunValid"),i=Options.getValue("codeLinting");e&&(i&&t?this.editorValidates&&this.runOnTimer():this.runOnTimer())}autoSave(){Layout.timers.save=setInterval(()=>{let e=Options.getValue("autoSave"),t=Layout.counters.save;e&&t>0&&(Actions.save(),Layout.counters.save=0)},6e4)}loadLinters(e){}switchLanguageAction(e){e&&this.switchLanguage(e.target)}switchLanguage(e){let t=e.closest(".windowSettings").dataset.panel,i=Layout.editors[t],o=e.closest(".windowSettings").querySelector("input[type=radio].panelChoice:checked"),n=o.dataset.panelName,s=o.dataset.editorLanguage,a=e.closest(".windowSettings").querySelector(".panelExtrasChoice select");if(!i)return!1;if(Layout.spinnerStart(),i.setLanguage(s),a){let e=n;Layout.editors[t].setLabelName(e,n,t)}else Layout.editors[t].setLabelName(n,n,t);EditorConfig.panels[t]=n.toLowerCase(),Track.ui(`Switch language: ${n}`)}setAsBase(e){e&&(e.preventDefault(),e.stopPropagation()),Layout.spinnerStart();let t=new URLSearchParams({slug:EditorConfig.fiddle.slug,version:EditorConfig.fiddle.version});Layout.request("post",EditorConfig.paths.favorite,t,{complete:e=>{e.data.error?console.log(`ERROR: ${e.data.error}`):(history.pushState(history.state,document.title,e.data.url),Layout.spinnerEnd())},error:e=>{console.log(`ERROR: ${response.data.error}`)}}),Track.ui("Mark as favourite")}setPrivacy(e){if(e&&e.preventDefault(),EditorConfig.is_pro){let e=new URLSearchParams({pastie_id:EditorConfig.fiddle.pastie_id,value:EditorConfig.fiddle.private?0:1});Layout.request("post",EditorConfig.paths.fiddlePrivacy,e,{complete:e=>{let t=document.querySelector("#toggle-privacy");EditorConfig.fiddle.private=e.data.private,e.data.private?(t.classList.add("mode_private"),t.classList.remove("mode_public"),t.dataset.tippySimpleContent="Make this fiddle public"):(t.classList.add("mode_public"),t.classList.remove("mode_private"),t.dataset.tippySimpleContent="Make this fiddle private")},error:e=>{console.error("Error toggling privacy:",e)}}),Track.ui("Toggle fiddle privacy")}else window.ModalManager.show({dataset:{modalId:"modal-pro"}})}disableForCollaboration(){Grid.switchGrid("grid_1",!0);let e=document.querySelector("#editor-options input[name='autoRunValid']");e.checked=!1,Options.modify(e,null);let t=document.querySelector("#editor-options input[name='autoRun']");t.checked=!1,Options.modify(t,null);let i=document.querySelector("#editor-options input[name='autoSave']");i.checked=!1,Options.modify(i,null),document.querySelector("#collaborate").parentNode.classList.add("disabled")}launchCollaboration(e){let t=document.querySelector(`${this.options.collaborateId}`);if(e&&(e.preventDefault(),e.stopPropagation()),"grid_1"===Grid.currentGrid||confirm("We need to switch layouts to launch collaboration. Proceed?")){Layout.spinnerStart(),this.disableForCollaboration(),window.TogetherJSConfig_enableAnalytics=!1,window.TogetherJSConfig_cloneClicks=!0,window.TogetherJSConfig_toolName="Collaboration",window.TogetherJSConfig_suppressJoinConfirmation=!0,window.TogetherJSConfig_hubBase="https://togetherjs-hub.glitch.me/",window.TogetherJSConfig_ignoreMessages=!0,window.TogetherJSConfig_getUserName=function(){return EditorConfig.user.nameOrUser?EditorConfig.user.nameOrUser:"Anon"};let e=document.createElement("script");e.src="https://togetherjs.com/togetherjs.js",e.async=!0,e.onload=function(){TogetherJS(t),TogetherJS.on("ready",function(){Layout.spinnerEnd()}),TogetherJS.on("close",function(){document.querySelector("#collaborate").parentNode.classList.remove("disabled")}),Track.ui("Launch Collaboration")},document.head.appendChild(e)}}updateEditorConfig(e){EditorConfig.fiddle.pastie_id=e.pastie_id,EditorConfig.fiddle.slug=e.slug,EditorConfig.fiddle.version=e.version,EditorConfig.isAuthor=e.is_author,EditorConfig.paths.update=e.update_path}updateAnonFiddles(e){if(!e.is_author){let t=localStorage.getItem("JSFIDDLE_recent_fiddles");t||(localStorage.setItem("JSFIDDLE_recent_fiddles","[]"),t="[]");let i=JSON.parse(t),o={slug:e.slug,title:e.title};i.filter(function(e){return e.slug===o.slug}).length<=0?i.push(o):i=i.map(function(e){return e.slug===o.slug&&(e.title=o.title),e}),localStorage.setItem("JSFIDDLE_recent_fiddles",JSON.stringify(i))}}saveSuccess(e){if(e.error)Layout.createFlashMessage(e.error);else{if(history.pushState(history.state,document.title,e.fiddle_path),Draft.discard(EditorConfig.fiddle.slug),this.updateEditorConfig(e),this.updateAnonFiddles(e),document.querySelectorAll("#tabs a").forEach(function(e){e.classList.remove("modified")}),EditorConfig.isAuthor&&""!==EditorConfig.fiddle.slug){var t=document.querySelectorAll("#actions li.hidden");for(const e of t)e.classList.remove("hidden"),e.classList.add("visible")}this.updateEditorConfig(e),Layout.updateAuthorSegment(e),this.suggestTitle()}Layout.spinnerEnd(),this.reloadSponsors()}reloadSponsors(){if("undefined"!=typeof _carbonads)if(window.CA_SAVE_COUNTER>=2){document.querySelector("#carbonads")?_carbonads.refresh():_carbonads.reload(),window.CA_SAVE_COUNTER=0}else window.CA_SAVE_COUNTER=window.CA_SAVE_COUNTER+1;if("undefined"!=typeof ethicalads)if(window.CA_SAVE_COUNTER>=2){document.querySelector("#ethical-sponsor")&&ethicalads.reload(),window.CA_SAVE_COUNTER=0}else window.CA_SAVE_COUNTER=window.CA_SAVE_COUNTER+1}save(e){e&&(e.preventDefault(),e.stopPropagation()),this.isAuthor()?EditorConfig.paths.update?this.update():this.saveNew():this.isSessionAuthor()?this.update():this.saveNew({setSessionAuthor:!0})}saveNew(e){Layout.spinnerStart(),Layout.request("post",EditorConfig.paths.save,this.form,{complete:t=>{e&&e.setSessionAuthor&&this.setSessionAuthor(t.data),this.saveSuccess.call(this,t.data)},error:e=>{console.error("Error saving new fiddle:",e)}}),Track.ui("Save new fiddle")}update(e){e&&(e.preventDefault(),e.stopPropagation()),Layout.spinnerStart(),Layout.request("patch",EditorConfig.paths.update,this.form,{complete:e=>{this.saveSuccess.call(this,e.data)},error:e=>{console.error("Error updating fiddle:",e)}}),Track.ui("Update fiddle")}fork(e){e&&(e.preventDefault(),e.stopPropagation()),Layout.spinnerStart(),Layout.request("post",EditorConfig.paths.fork,this.form,{complete:e=>{this.saveSuccess.call(this,e.data)},error:e=>{console.error("Error forking fiddle:",e)}}),Track.ui("Save as new fiddle")}download(e){e&&(e.preventDefault(),e.stopPropagation()),Layout.spinnerStart();const t=`/${EditorConfig.fiddle.slug}/${EditorConfig.fiddle.version}/download`,i=document.createElement("iframe");i.style.display="none",i.src=t,i.onload=function(){Layout.spinnerEnd(),setTimeout(function(){document.body.removeChild(i)},1e3)},document.body.appendChild(i),Track.ui("Download fiddle")}embed(){import("./services/EmbedCreator.js").then(e=>new e.default)}isAuthor(){return EditorConfig.isAuthor}isSessionAuthor(){let e=EditorConfig.fiddle.slug,t=sessionStorage.getItem("anonymus_fiddles");return!!t&&(t=JSON.parse(t)).indexOf(e)>=0}setSessionAuthor(e){let t=sessionStorage.getItem("anonymus_fiddles");(t=t?JSON.parse(t):[]).push(e.slug),sessionStorage.setItem("anonymus_fiddles",JSON.stringify(t))}run(e){e&&(e.preventDefault(),e.stopPropagation()),Layout.spinnerStart(),this.form.submit();var t=document.querySelector(".resultsPanel");t&&t.classList.add("running"),Options.getValue("clearConsole")&&(console.clear(),ConsoleManager.clear()),Layout.hideBoilerplates(),Track.ui("Run fiddle")}loadLibraryVersions(e){e&&Layout.request("post",substitute(this.options.loadLibraryVersionsURL,{group_id:e}),null,{complete:e=>{document.querySelector("#js_lib").innerHTML="",document.querySelector("#js_dependency").innerHTML="",e.data.libraries.forEach(function(e){let t=document.createElement("option");t.value=e.id,t.textContent=`${e.group_name} ${e.version}`,document.querySelector("#js_lib").appendChild(t),e.selected&&(document.querySelector("#js_lib").value=e.id)}),e.data.dependencies.forEach(function(e){let t=`\n              <label class="checkboxCont">\n              <input id="dep_${e.id}" type="checkbox" name="js_dependency[${e.id}]" value="${e.id}">\n              <span class="checkbox"></span>\n              ${e.name}</label>\n            `,i=document.createElement("li");i.innerHTML=t,document.querySelector("#js_dependency").appendChild(i),e.selected&&(document.querySelector(`#dep_${e.id}`).checked=!0)}),Track.ui("Load library version")},error:e=>{console.error("Error loading library version:",e)}})}loadDependencies(e){e&&Layout.request("get",substitute(EditorConfig.paths.loadDependencies,{lib_id:e}),null,{complete:e=>{document.querySelector("#js_dependency").innerHTML="",e.data.forEach(function(e){let t=`\n              <label class="checkboxCont">\n              <input id="dep_${e.id}" type="checkbox" name="js_dependency[${e.id}]" value="${e.id}">\n              <span class="checkbox"></span>\n              ${e.name}</label>\n            `,i=document.createElement("li");i.innerHTML=t,document.querySelector("#js_dependency").appendChild(i),e.selected&&(document.querySelector(`#dep_${e.id}`).checked=!0)}),Track.ui("Load dependencies")},error:e=>{console.error("Error loading library dep:",e)}})}suggestTitle(){import("./services/GenerateTitle.js").then(e=>{new e.default({titleSelector:this.options.titleSelector}).get()})}}window.defaultEditorOptions=Helpers.deepMerge({folding:!0,detectIndentation:"off",scrollBeyondLastLine:!1,theme:"vs-jsfiddle-dark",scrollbar:{useShadows:!1,verticalScrollbarSize:8,horizontalScrollbarSize:8,horizontal:"hidden"},minimap:{enabled:!1},automaticLayout:!0,fixedOverflowWidgets:!0,fontLigatures:!0,fontVariations:!0,lineHeight:1.7,lineNumbersMinChars:3,links:!1,overviewRulerBorder:!1,renderLineHighlightOnlyWhenFocus:!0,showDeprecated:!0,snippetSuggestions:"bottom",disableMonospaceOptimizations:!0,colorDecoratorsActivatedOn:"click",colorDecoratorsLimit:10,overviewRulerLanes:0,hideCursorInOverviewRuler:!0,overviewRulerBorder:!1,bracketPairColorization:{enabled:!1}},EditorUISettings);class Editor{constructor(e,t){this.options={},this.elements={container:e,textarea:t.textarea},this.windowNames={javascript:"JavaScript",html:"HTML",haml:"HAML",css:"CSS",scss:"SCSS",coffeescript:"CoffeeScript","javascript 1.7":"JavaScript 1.7"},window.cmOptions=Helpers.deepMerge(window.defaultEditorOptions,window.userCmOptions),this.options.editor=window.cmOptions,this.options={...this.options,...t},t=this.options.editor,monaco.editor.defineTheme("vs-jsfiddle-dark",{base:"vs-dark",inherit:!0,rules:[{foreground:"#6e6e6e",token:"comment"}],colors:{"editor.foreground":"#ededed","editor.background":"#212121","editor.selectionBackground":"#FFFFFF30","editorBracketMatch.background":"#ffffff00","editorBracketMatch.border":"#ffffff00","editor.lineHighlightBorder":"#ffffff00","editor.lineHighlightBackground":"#FFFFFF08"}}),monaco.editor.defineTheme("vs-jsfiddle-light",{base:"vs",inherit:!0,rules:[{foreground:"#cccccc",token:"comment"}],colors:{"editor.foreground":"#1E1F1F","editor.background":"#f9f9f9","editor.selectionBackground":"#00000015","editorBracketMatch.background":"#ffffff00","editorBracketMatch.border":"#ffffff00","editor.lineHighlightBorder":"#ffffff00","editor.lineHighlightBackground":"#00000008"}});let i=Helpers.deepMerge({value:t.value||decodeHTMLEntities(EditorConfig.value[this.options.name]),language:this.options.syntax},window.defaultEditorOptions);this.editor=monaco.editor.create(this.elements.container,i),this.attachEvents();let o=document.querySelector(`.panelTidy[data-panel=${this.options.name}]`);o&&o.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),this.tidyCode()}),Layout.registerEditor(this),this.setLabelName(this.options.language),this.displayJSModuleInfo(),this.validate(),this.loadEmmet(),this.options.editor.autofocus&&this.editor.focus()}attachEvents(){this.editor.addAction({id:"editor-save",label:"Save fiddle",keybindings:[monaco.KeyMod.CtrlCmd|monaco.KeyCode.KeyS],run:()=>Actions.save()}),this.editor.addAction({id:"editor-run",label:"Run fiddle",keybindings:[monaco.KeyMod.CtrlCmd|monaco.KeyCode.Enter],run:()=>Actions.run()}),this.editor.onDidChangeModelContent(this.contentChange.bind(this)),this.editor.onDidFocusEditorText(()=>{Layout.loopEditors(e=>{e.editor.setSelection({endColumn:0,endLineNumber:0,startColumn:0,startLineNumber:0})}),this.focus()}),this.editor.getModel().onDidChangeLanguage(e=>{Layout.spinnerEnd()}),this.editor.onDidChangeModelDecorations(e=>{let t=monaco.editor.getModelMarkers();t&&(Actions.editorValidates=t.length<=0)})}focus(){document.querySelectorAll(".windowLabelCont").forEach(e=>{e.classList.remove("focused")});let e=document.querySelector(`.windowLabelCont.codeLang_${this.options.name}`);e&&e.classList.add("focused")}tidyCode(){let e=this.getCode();if(e){let t=this.options.language.toLowerCase();this.options.tidy.indexOf(t)>=0&&(window.prettierWorker||(window.prettierWorker=new Worker("/js/worker/prettier.js"),Layout.spinnerStart()),window.prettierWorker.postMessage({code:e,lang:t}),window.prettierWorker.onmessage=(e=>{if("workerReady"===e.data)Layout.spinnerEnd();else{let t=e.data;this.setCode(t)}}))}}contentChange(){let e=document.querySelector(`#tabs [data-lang="${this.options.name}"]`);e&&!e.classList.contains("modified")&&e.classList.add("modified"),Layout.counters.save+=1,this.validate(),Actions.autoRun(),this.displayJSModuleInfo(),this.hotreload(),this.updateTextareaFromEditor(),Draft.store(EditorConfig.fiddle.slug),Layout.editors[this.options.name].monacopilot&&CodeCompletionManager.updateContext(this.options.name)}hotreload(){Options.getValue("hotreloadCss")&&"css"===this.options.name&&"css"===this.options.language&&document.querySelector("iframe[name=result]").contentWindow.postMessage({css:{payload:this.getCode()}},"*"),Options.getValue("hotreloadHtml")&&"html"===this.options.name&&"html"===this.options.language&&document.querySelector("iframe[name=result]").contentWindow.postMessage({html:{payload:this.getCode()}},"*")}displayJSModuleInfo(){if("js"===this.options.name){let e=/import(?:(?:(?:[ \n\t]+([^ *\n\t\{\},]+)[ \n\t]*(?:,|[ \n\t]+))?([ \n\t]*\{(?:[ \n\t]*[^ \n\t"'\{\}]+[ \n\t]*,?)+\})?[ \n\t]*)|[ \n\t]*\*[ \n\t]*as[ \n\t]+([^ \n\t\{\}]+)[ \n\t]+)from[ \n\t]*(?:['"])([^'"\n]+)(['"])/g,t=/export /g;if(this.getCode().match(e)||this.getCode().match(t)){document.querySelector(".isModuleInfo").classList.add("visible")}else{document.querySelector(".isModuleInfo").classList.remove("visible")}}}validate(){"html"===this.options.name&&this.checkFullHtml()}loadEmmet(){import("https://cdn.jsdelivr.net/npm/emmet-monaco-es@5.5.0/+esm").then(e=>{e[this.options.emmet](monaco)})}checkFullHtml(){let e=this.getCode();this.elements.panelActionsCont=this.getPanel().querySelector(".panelActionsCont"),this.elements.panelActionsCont.innerHTML="",this.hasFullHTML(e)&&this.setupHtmlConverter(e)}markForbiddenTags(){[new RegExp("<!doctype\\b[^>]*>","gi"),new RegExp("<html\\b[^>]*>","gi"),new RegExp("<body\\b[^>]*>","gi"),new RegExp("<head\\b[^>]*>","gi"),new RegExp("<meta\\b[^>]*>","gi"),new RegExp("<title>.*</title>","gi"),"</body>","</head>","</html>"].forEach(e=>{let t=this.editor.getSearchCursor(e);for(;t.findNext();)this.editor.markText(t.from(),t.to(),{css:"color: var(--text-color-4); text-decoration: line-through;"})})}setupHtmlConverter(e){if(!this.elements.panelActionsCont.querySelector(".fixFullHtml")){let t=this.hasFullHTML(e),i=this.hasScriptStyle(e),o=t&&!i?"HTML/HEAD/BODY are added automatically. Clean up":"Move CSS and JavaScript into their own panels",n=document.createElement("li");n.classList.add("fixFullHtml","error"),n.innerHTML=`\n      <svg viewBox="0 0 24 24" width="30" height="30" fill="none">\n        <path d="M20.5 9.5V14.1667C20.5 16.34 20.5 17.4267 20.1689 18.2918C19.6627 19.6148 18.6207 20.6601 17.3019 21.1679C16.4395 21.5 15.3562 21.5 13.1896 21.5C12.0534 21.5 11.4853 21.5 10.9566 21.3834C10.1499 21.2056 9.40001 20.8294 8.77419 20.2888C8.36398 19.9344 8.02311 19.4785 7.34137 18.5667L4.33738 14.5487C3.8758 13.9314 3.88907 13.0789 4.36965 12.4763C4.99772 11.6888 6.16877 11.6237 6.8797 12.3369L8.5011 13.9634V10.5V6C8.5011 5.17157 9.17267 4.5 10.0011 4.5C10.8295 4.5 11.5011 5.17157 11.5011 6M11.5011 6V4C11.5011 3.17157 12.1727 2.5 13.0011 2.5C13.8295 2.5 14.5011 3.17157 14.5011 4V6M11.5011 6V10.5M14.5011 6C14.5011 5.17157 15.1727 4.5 16.0011 4.5C16.8295 4.5 17.5011 5.17157 17.5011 6V8M14.5011 6V10.5M20.5011 10.5V8C20.5011 7.17157 19.8295 6.5 19.0011 6.5C18.1727 6.5 17.5011 7.17157 17.5011 8M17.5011 8V10.5" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" />\n      </svg>\n      <div>\n        <strong>Hold on!</strong>\n        <p>${o} â†’</p>\n      </div>`,n.addEventListener("click",t=>{Layout.documentToPanels(t,e)}),this.elements.panelActionsCont.appendChild(n)}}hasFullHTML(e){let t=e.match(/<\/?(?:html|head(?!er\b)|body)[^>]*>/gi);return t&&t.length>=2}hasScriptStyle(e){let t=e.match(/<\/?(script|style)[^>]*>/gi);return t&&t.length>=1}getEditor(){return this.editor}getPanel(){return this.panel||(this.panel=this.elements.container.parentNode),this.panel}getLabel(){return this.getPanel().querySelector(".windowLabel .label")}setTabsLabel(e,t){if(e){let i=document.querySelector(`#tabs a[data-lang=${e}]`);i&&(i.innerHTML=t)}}getCode(){return this.editor.getValue()}setCode(e){this.editor.setValue(e)}prependCode(e){this.setCode(e+this.getCode())}appendCode(e){this.setCode(this.getCode()+e)}refresh(){this.editor.render(!0)}setOption(e,t){this.editor.updateOptions({[e]:t})}updateOptions(e){this.editor.updateOptions(e)}updateTextareaFromEditor(){const e=this.getCode();this.elements.textarea.value=e,EditorConfig.value[this.options.name]=e}setLabelName(e,t,i){this.getLabel().textContent=this.windowNames[e]||e,this.setTabsLabel(i,this.windowNames[t]||t)}setLanguage(e){this.editor.getModel().setLanguage(e)}dispose(){this.editor.dispose()}}class EditorHTML extends Editor{constructor(e,t){const i={name:"html",language:"html",editor:{autofocus:!0},tidy:["html"],emmet:"emmetHTML",textarea:document.querySelector("textarea[name=code_html]")};super(e,Helpers.deepMerge(i,t))}}class EditorCSS extends Editor{constructor(e,t){const i={name:"css",language:"css",editor:{},tidy:["css"],emmet:"emmetCSS",textarea:document.querySelector("textarea[name=code_css]")};super(e,Helpers.deepMerge(i,t))}}class EditorJS extends Editor{constructor(e,t){const i={name:"js",language:"javascript",editor:{},tidy:["javascript","js"],emmet:"emmetJSX",textarea:document.querySelector("textarea[name=code_js]")};super(e,Helpers.deepMerge(i,t))}}window.EditorPanel={HTML:EditorHTML,CSS:EditorCSS,JS:EditorJS};var autoComplete=function(){return function(e){if(document.querySelector){var t={selector:0,source:0,minChars:3,delay:150,offsetLeft:0,offsetTop:1,cache:1,menuClass:"",renderItem:function(e,t){t=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var i=new RegExp("("+t.split(" ").join("|")+")","gi");return'<div class="autocomplete-suggestion" data-val="'+e+'">'+e.replace(i,"<b>$1</b>")+"</div>"},onSelect:function(e,t,i){}};for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);for(var o="object"==typeof t.selector?[t.selector]:document.querySelectorAll(t.selector),n=0;n<o.length;n++){var s=o[n];s.sc=document.createElement("div"),s.sc.className="autocomplete-suggestions "+t.menuClass,s.autocompleteAttr=s.getAttribute("autocomplete"),s.setAttribute("autocomplete","off"),s.cache={},s.last_val="",s.updateSC=function(e,i){var o=s.getBoundingClientRect();if(s.sc.style.left=Math.round(o.left+(window.pageXOffset||document.documentElement.scrollLeft)+t.offsetLeft)+"px",s.sc.style.top=Math.round(o.bottom+(window.pageYOffset||document.documentElement.scrollTop)+t.offsetTop)+"px",s.sc.style.width=Math.round(o.right-o.left)+"px",!e&&(s.sc.style.display="block",s.sc.maxHeight||(s.sc.maxHeight=parseInt((window.getComputedStyle?getComputedStyle(s.sc,null):s.sc.currentStyle).maxHeight)),s.sc.suggestionHeight||(s.sc.suggestionHeight=s.sc.querySelector(".autocomplete-suggestion").offsetHeight),s.sc.suggestionHeight))if(i){var n=s.sc.scrollTop,a=i.getBoundingClientRect().top-s.sc.getBoundingClientRect().top;a+s.sc.suggestionHeight-s.sc.maxHeight>0?s.sc.scrollTop=a+s.sc.suggestionHeight+n-s.sc.maxHeight:a<0&&(s.sc.scrollTop=a+n)}else s.sc.scrollTop=0},l(window,"resize",s.updateSC),document.body.appendChild(s.sc),c("autocomplete-suggestion","mouseleave",function(e){var t=s.sc.querySelector(".autocomplete-suggestion.selected");t&&setTimeout(function(){t.className=t.className.replace("selected","")},20)},s.sc),c("autocomplete-suggestion","mouseover",function(e){var t=s.sc.querySelector(".autocomplete-suggestion.selected");t&&(t.className=t.className.replace("selected","")),this.className+=" selected"},s.sc),c("autocomplete-suggestion","mousedown",function(e){if(r(this,"autocomplete-suggestion")){var i=this.getAttribute("data-val");s.value=i,t.onSelect(e,i,this),s.sc.style.display="none"}},s.sc),s.blurHandler=function(){try{var e=document.querySelector(".autocomplete-suggestions:hover")}catch(t){e=0}e?s!==document.activeElement&&setTimeout(function(){s.focus()},20):(s.last_val=s.value,s.sc.style.display="none",setTimeout(function(){s.sc.style.display="none"},350))},l(s,"blur",s.blurHandler);var a=function(e){var i=s.value;if(s.cache[i]=e,e.length&&i.length>=t.minChars){for(var o="",n=0;n<e.length;n++)o+=t.renderItem(e[n],i);s.sc.innerHTML=o,s.updateSC(0)}else s.sc.style.display="none"};s.keydownHandler=function(e){var i,o=window.event?e.keyCode:e.which;if((40==o||38==o)&&s.sc.innerHTML)return(n=s.sc.querySelector(".autocomplete-suggestion.selected"))?(i=40==o?n.nextSibling:n.previousSibling)?(n.className=n.className.replace("selected",""),i.className+=" selected",s.value=i.getAttribute("data-val")):(n.className=n.className.replace("selected",""),s.value=s.last_val,i=0):((i=40==o?s.sc.querySelector(".autocomplete-suggestion"):s.sc.childNodes[s.sc.childNodes.length-1]).className+=" selected",s.value=i.getAttribute("data-val")),s.updateSC(0,i),!1;if(27==o)s.value=s.last_val,s.sc.style.display="none";else if(13==o||9==o){var n;(n=s.sc.querySelector(".autocomplete-suggestion.selected"))&&"none"!=s.sc.style.display&&(t.onSelect(e,n.getAttribute("data-val"),n),setTimeout(function(){s.sc.style.display="none"},20))}},l(s,"keydown",s.keydownHandler),s.keyupHandler=function(e){var i=window.event?e.keyCode:e.which;if(!i||(i<35||i>40)&&13!=i&&27!=i){var o=s.value;if(o.length>=t.minChars){if(o!=s.last_val){if(s.last_val=o,clearTimeout(s.timer),t.cache){if(o in s.cache)return void a(s.cache[o]);for(var n=1;n<o.length-t.minChars;n++){var r=o.slice(0,o.length-n);if(r in s.cache&&!s.cache[r].length)return void a([])}}s.timer=setTimeout(function(){t.source(o,a)},t.delay)}}else s.last_val=o,s.sc.style.display="none"}},l(s,"keyup",s.keyupHandler),s.focusHandler=function(e){s.last_val="\n",s.keyupHandler(e)},t.minChars||l(s,"focus",s.focusHandler)}this.destroy=function(){for(var e=0;e<o.length;e++){var t=o[e];d(window,"resize",t.updateSC),d(t,"blur",t.blurHandler),d(t,"focus",t.focusHandler),d(t,"keydown",t.keydownHandler),d(t,"keyup",t.keyupHandler),t.autocompleteAttr?t.setAttribute("autocomplete",t.autocompleteAttr):t.removeAttribute("autocomplete"),document.body.removeChild(t.sc),t=null}}}function r(e,t){return e.classList?e.classList.contains(t):new RegExp("\\b"+t+"\\b").test(e.className)}function l(e,t,i){e.attachEvent?e.attachEvent("on"+t,i):e.addEventListener(t,i)}function d(e,t,i){e.detachEvent?e.detachEvent("on"+t,i):e.removeEventListener(t,i)}function c(e,t,i,o){l(o||document,t,function(t){for(var o,n=t.target||t.srcElement;n&&!(o=r(n,e));)n=n.parentElement;o&&i.call(n,t)})}}}();"function"==typeof define&&define.amd?define("autoComplete",function(){return autoComplete}):"undefined"!=typeof module&&module.exports?module.exports=autoComplete:window.autoComplete=autoComplete;class Modal{constructor(){this.currentFrame=null;let e=this;window.addEventListener("message",function(t){let i=t.data.payload;if("export-colors"===t.data.type&&(e.closeAll(),e.prependColorPalette(i)),"export-font"===t.data.type){e.closeAll();let t=document.createElement("link");t.rel="stylesheet",t.href=i.fontUrl,t.onload=(()=>{Layout.editors.html.setOption("fontFamily",i.fontFamily),Layout.editors.js.setOption("fontFamily",i.fontFamily),Layout.editors.css.setOption("fontFamily",i.fontFamily),Options.modify({type:"text",name:"fontSize",value:i.fontSize},!0),Options.modify({type:"text",name:"fontFamily",value:i.fontFamily},!0),CookieManager.write("JSFIDDLE_coderfont",i.fontFamily,200),document.querySelector("#editor-options input[name=fontFamily]").value=i.fontFamily,document.querySelector("#editor-options select[name=fontSize]").value=i.fontSize}),document.head.appendChild(t)}}),document.body.addEventListener("click",function(t){if(t.target.classList.contains("showModalTrigger")){t.preventDefault(),e.closeAll(t.target);let i=t.target;e.show(i)}}),document.body.addEventListener("click",function(t){"close-modal"===t.target.dataset.actAs&&(t.preventDefault(),e.closeAll(t.target))})}closeAll(e){let t=document.querySelectorAll(".modalBody");for(const i of t){i.classList.remove("visible");let t=i.querySelector("iframe");e&&e.dataset.unloadframe&&t&&t.removeAttribute("src")}document.body.classList.remove("modalOverlayVisible")}show(e){let t=e.dataset.modalId,i=document.querySelector(`#${t}`),o=i.querySelector(".loader-linear");return e.dataset.modalSource&&(this.currentFrame=i.querySelector("iframe"),this.currentFrame.src.includes(e.dataset.modalSource)||(o.classList.add("active"),this.currentFrame.src=e.dataset.modalSource,this.currentFrame.addEventListener("load",function(){o.classList.add("full"),setTimeout(()=>{o.classList.remove("active"),o.classList.remove("full")},800)}))),e.dataset.triggerCheck&&(document.querySelector(e.dataset.triggerCheck).checked=!0),i.classList.add("visible"),document.body.classList.add("modalOverlayVisible"),Track.ui(`Opened modal (${e.dataset.modalId})`),i}prependColorPalette(e){const t=`${e}body {\n  background: linear-gradient(90deg, var(--color-1) 0%, var(--color-1) 25%, var(--color-2) 25%, var(--color-2) 50%, var(--color-3) 50%, var(--color-3) 75%, var(--color-4) 75%, var(--color-4) 100%);\n}`;Layout.editors.css.prependCode(t),Actions.run()}}